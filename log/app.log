2025-11-27 07:45:36,416 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 07:45:36,427 - INFO - sftp.py:14 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 07:47:43,546 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 07:47:43,562 - INFO - sftp.py:14 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 07:47:54,606 - INFO - user.py:874 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:47:56,525 - INFO - user.py:878 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:00,386 - INFO - user.py:887 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:04,920 - INFO - user.py:891 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:10,929 - INFO - user.py:898 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:16,765 - INFO - user.py:901 - Processing user data: {'sftpuser': 'someuser', 'sftpmounts': {'img': '/mnt/img/OrangePi/3b/rw', 'opis': '/home/dvestezar/pro_opis'}, 'sftpcerts': ['b64:c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFDQVFER2owQWVYeUpRQTFDaEwydDVYM2hBYXJJQ29pRDZJRVY3cW5tOWxqN0YyWVVNQVAzbGUvcFpSMjkvNXRQMmFib2RjSDBGN0NDMkJSc1FvRnNEMVY3RVlEWDYxMGRTSmRUck9aUWw3V0grelYzRTJKY1k5NlQ4a0NobG5uOGdTWnM5RWluOVcrOTVJTkgvelFKeDRZQmhMZHFuWktTWENoN3NIZEZmdFRBQ2x5UUlHZFFDK3pMd0xrZ3F0bFU3TDBiQXNxZnczemRFTjZHTEZuT2dLOGt5Rm9sNnB6b2FiK09MWFVGd1BoSisrM2RBaTI5RlVCY0UxYldmdmFYVzdaY3phcEVvdE9oUmJhWE9yRjlRSWI5QWppam5Va0RwdzhHbWFMQzJJRlQ1bXRsaUNoQjhabG83Y2ROZm9hVHpma3BkUG1MWThHUUQ0VURkOEJzS1FxMTRXNG41dUxDVWl6VlQyQllwRzEzTXhRaXhBaFUyaEJGNmU3WmVwNi9IZGUxYS9OdUs0bnhWMFpLbzhxbkxkWmkwTks1UTBMUVRyRWU5bUNCV2NXSnBob3MyVGxnRUlURXN6TFpnRDEzTkxMTkRscFcrRndPdlg4OTRRM3VlcHpQM3JMa2JDNzBJOEhXdFRVU1IzZFYwTXk3bXBRRkRMZ0phK21PVUd1VUdTb3F4NW1LMkFSWGpOeE0xSC83YTl2L3B0MWdpT3dLUm5uNE43R3pneEVuVWpWc0YyOEUycS9ndEVFMnB0VEo4WmJZVU1Hc0xQcWJuRlVSL3N5alF2UXBLN0tXQ0YvQzN1YWdOVlhKUWFDM3ZBYTdyenJ1dk1SL2F6Z04zOUJWOHNmcmFBRjk5VlZXN2E0ZG9lYnYvZFZ5a1NuT1h0UVVXZXpCRFdCTkVIb094VHc9PSB6bGtsXHplZG5pa0BQQy1aRUROSUs=']}
2025-11-27 07:48:51,310 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 07:48:51,327 - INFO - sftp.py:14 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 07:48:54,205 - INFO - user.py:874 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:54,206 - INFO - user.py:878 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:54,207 - INFO - user.py:887 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:54,208 - INFO - user.py:891 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:54,209 - INFO - user.py:898 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:48:58,313 - INFO - user.py:901 - Processing user data: someuser
2025-11-27 07:49:13,537 - INFO - user.py:910 - User someuser already exists, skipping creation.
2025-11-27 07:49:19,284 - INFO - user.py:920 - Adding mountpoints for user someuser.
2025-11-27 07:53:05,823 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 07:53:05,839 - INFO - sftp.py:14 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 07:53:09,065 - INFO - user.py:874 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:53:09,066 - INFO - user.py:878 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:53:09,067 - INFO - user.py:887 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:53:09,068 - INFO - user.py:891 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:53:09,068 - INFO - user.py:898 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 07:53:11,280 - INFO - user.py:901 - Processing user data: someuser
2025-11-27 07:53:15,988 - INFO - user.py:910 - User someuser already exists, skipping creation.
2025-11-27 07:53:19,559 - INFO - user.py:920 - Adding mountpoints for user someuser.
2025-11-27 07:53:21,719 - INFO - user.py:922 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 07:53:25,155 - INFO - user.py:924 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 07:53:34,555 - INFO - user.py:935 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 07:53:37,895 - INFO - user.py:924 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 07:53:40,850 - INFO - user.py:935 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 07:53:42,322 - INFO - user.py:941 - Adding certificates for user someuser.
2025-11-27 07:53:46,068 - INFO - user.py:943 -  - Found 1 certificates to add for user someuser.
2025-11-27 07:53:48,295 - INFO - user.py:945 -    - Processing certificate for user someuser.
2025-11-27 07:53:51,574 - INFO - user.py:951 -    - Decoding base64 certificate for user someuser.
2025-11-27 07:53:56,293 - INFO - user.py:956 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 07:53:57,516 - INFO - user.py:961 -    - Ensuring SSH key for user someuser.
2025-11-27 07:54:02,965 - INFO - user.py:965 -    - Adding certificate for user someuser.
2025-11-27 07:54:08,144 - INFO - user.py:971 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 07:54:11,977 - INFO - user.py:976 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 1 users.
2025-11-27 07:54:26,657 - INFO - sftp.py:46 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:04:05,646 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:05:19,180 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:05:19,221 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:05:19,222 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:05:19,223 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:05:19,255 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:05:19,259 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:05:31,858 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:05:32,796 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:05:35,986 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:05:41,949 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:05:43,857 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:05:49,238 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:06:20,181 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:06:20,214 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:06:20,214 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:06:20,215 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:06:20,233 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:06:20,237 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:06:20,238 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:06:20,238 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:06:20,239 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:06:20,239 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:06:20,240 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:06:20,240 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:06:40,377 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:07:30,069 - INFO - ssh.py:231 - Ensuring jail directory for user someuser
2025-11-27 13:07:30,070 - ERROR - parser.py:167 - Failed to create user from JSON data: name 'jhlp' is not defined
2025-11-27 13:07:30,071 - ERROR - parser.py:168 - name 'jhlp' is not defined
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 89, in createUserFromJson
    u=sftpUserMng(username)
      ^^^^^^^^^^^^^^^^^^^^^
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 62, in __init__
    self.mountpointManager=mountpointsManager(username)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 38, in __init__
    jailDir= ssh.ensureJail(self.username)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/ssh.py", line 232, in ensureJail
    homeDir=jhlp.getUserHome(username)
            ^^^^
NameError: name 'jhlp' is not defined. Did you mean: 'hlp'?
2025-11-27 13:07:30,074 - INFO - ssh.py:270 - Restarting sshd service
2025-11-27 13:07:30,147 - INFO - ssh.py:277 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:07:30,148 - INFO - parser.py:172 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 0 users.
2025-11-27 13:07:30,148 - ERROR - parser.py:174 - No users were created or updated from JSON data.
2025-11-27 13:07:30,149 - INFO - ssh.py:270 - Restarting sshd service
2025-11-27 13:07:30,177 - INFO - ssh.py:277 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:07:30,177 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:07:55,854 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:07:55,892 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:07:55,892 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:07:55,893 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:07:55,913 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:07:55,917 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:07:55,917 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:07:55,918 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:07:55,918 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:07:55,919 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:07:55,919 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:07:55,919 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:08:01,949 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:08:15,526 - INFO - ssh.py:231 - Ensuring jail directory for user someuser
2025-11-27 13:08:31,057 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:08:31,100 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:08:31,101 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:08:31,101 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:08:31,120 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:08:31,128 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:08:31,129 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:08:31,129 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:08:31,131 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:08:31,131 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:08:31,132 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:08:31,132 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:08:31,133 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:08:37,235 - INFO - ssh.py:230 - Ensuring jail directory for user someuser
2025-11-27 13:09:36,953 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:09:36,988 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:09:36,988 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:09:36,989 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:09:37,006 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:09:37,010 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:09:37,011 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:09:37,012 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:09:37,012 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:09:37,012 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:09:37,013 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:09:37,013 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:09:37,013 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:09:42,443 - INFO - ssh.py:230 - Ensuring jail directory for user someuser
2025-11-27 13:09:45,487 - INFO - ssh.py:242 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:10:09,874 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:10:26,537 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:10:26,538 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:10:52,144 - INFO - ssh.py:96 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:10:59,058 - INFO - ssh.py:99 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:11:59,535 - INFO - ssh.py:265 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:13:27,110 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:13:30,027 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:13:33,018 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:13:57,666 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:13:57,703 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:13:57,704 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:13:57,704 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:13:57,723 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:13:57,729 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:13:57,730 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:13:57,730 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:13:57,731 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:13:57,731 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:13:57,731 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:13:57,732 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:13:57,732 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:13:57,733 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:13:57,733 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:13:57,734 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:13:57,734 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:13:57,735 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:13:57,735 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:13:57,736 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:13:57,737 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:13:57,737 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:14:01,114 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:14:04,631 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:14:06,344 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:14:11,052 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:14:21,293 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:14:23,493 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:14:29,535 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:14:30,569 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:14:31,586 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:14:33,968 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:14:36,204 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:14:37,295 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:14:41,638 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:14:49,074 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:14:49,075 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:14:49,076 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:14:49,078 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:14:49,079 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:14:49,079 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:14:49,080 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:15:13,630 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:15:13,666 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:15:13,666 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:15:13,666 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:15:13,688 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:15:13,693 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:15:13,693 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:15:13,694 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:15:13,694 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:15:13,694 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:15:13,695 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:15:13,695 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:15:13,696 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:15:13,696 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:15:13,696 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:15:13,697 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:15:13,697 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:15:13,697 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:15:13,698 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:15:13,698 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:15:13,698 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:15:13,699 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:15:13,700 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:15:13,700 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:15:13,701 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:15:13,701 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:15:13,702 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:15:13,702 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:15:13,703 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:15:13,703 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:15:13,703 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:15:13,704 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:15:13,704 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:15:13,705 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:15:13,706 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:15:17,122 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:15:17,123 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:15:17,124 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:15:17,125 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:15:17,125 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:15:17,126 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:15:17,127 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:15:30,290 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 13:15:37,147 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:15:37,148 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:15:37,149 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:15:37,150 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:15:37,150 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:15:37,151 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:15:37,151 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:15:37,152 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:15:37,153 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:15:42,101 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 13:16:07,477 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:16:07,514 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:16:07,515 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:16:07,515 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:16:07,535 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:16:07,539 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:16:07,540 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:16:07,541 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:16:07,541 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:16:07,542 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:16:07,542 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:16:07,542 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:16:07,543 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:16:07,544 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:16:07,544 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:16:07,544 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:16:07,545 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:16:07,545 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:16:07,545 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:16:07,546 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:16:07,546 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:16:07,546 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:16:07,548 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:16:07,548 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:16:07,549 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:16:07,549 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:16:07,550 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:16:07,550 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:16:07,550 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:16:07,551 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:16:07,551 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:16:07,551 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:16:07,552 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:16:07,552 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:16:07,553 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:16:07,553 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:16:07,553 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:16:07,554 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:16:07,554 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:16:07,555 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:16:07,556 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:16:07,557 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:16:07,557 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 13:16:07,558 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:16:07,558 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:16:07,558 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:16:07,558 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:16:07,558 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:16:07,559 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:16:07,559 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:16:07,560 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:16:07,560 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:16:07,560 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 13:16:12,692 - ERROR - parser.py:160 - Failed to ensure mountpoint user groups for user someuser: 'mountpointsManager' object has no attribute 'getUserGroups'
2025-11-27 13:16:12,693 - ERROR - parser.py:161 - 'mountpointsManager' object has no attribute 'getUserGroups'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 158, in createUserFromJson
    u.mountpointManager.ensureMountPointUserGroups()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 225, in ensureMountPointUserGroups
    curGroups: list[str] = self.getUserGroups()
                           ^^^^^^^^^^^^^^^^^^
AttributeError: 'mountpointsManager' object has no attribute 'getUserGroups'
2025-11-27 13:16:12,698 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:16:12,729 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:16:12,729 - INFO - parser.py:172 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 0 users.
2025-11-27 13:16:12,730 - ERROR - parser.py:174 - No users were created or updated from JSON data.
2025-11-27 13:16:12,730 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:16:12,757 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:16:12,758 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:18:54,738 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:18:54,769 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:18:54,770 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:18:54,770 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:19:20,267 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:19:20,308 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:19:20,309 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:19:20,310 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:19:20,357 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:19:20,363 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:19:20,364 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:20,364 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:20,365 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:20,365 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:20,366 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:20,366 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:19:20,366 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:19:20,367 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:19:20,367 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:19:20,367 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:19:20,368 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:19:20,369 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:20,370 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:20,370 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:19:20,371 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:19:20,372 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:19:20,373 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:19:20,373 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:19:20,373 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:19:20,375 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:19:20,375 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:19:20,376 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:19:20,376 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:19:20,377 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:19:20,377 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:20,378 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:20,378 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:19:20,379 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:19:20,379 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:19:20,394 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:19:20,395 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:19:20,396 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:19:20,396 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:19:20,396 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:19:20,397 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:19:20,397 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:20,397 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:20,398 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:19:20,398 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:19:20,399 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:19:20,404 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:19:20,405 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:19:20,406 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:19:20,406 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:19:20,407 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:19:20,408 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:19:20,409 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:19:20,409 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:19:20,409 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:20,411 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:20,411 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:19:20,412 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:19:20,413 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:19:20,413 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:19:20,414 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 13:19:20,415 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:19:20,415 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:19:20,416 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:19:20,416 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:19:20,416 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:20,417 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:20,417 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:19:20,418 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:19:20,419 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:19:20,419 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 13:19:33,082 - ERROR - parser.py:160 - Failed to ensure mountpoint user groups for user someuser: getUserGroups() missing 1 required positional argument: 'username'
2025-11-27 13:19:33,083 - ERROR - parser.py:161 - getUserGroups() missing 1 required positional argument: 'username'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 158, in createUserFromJson
    u.mountpointManager.ensureMountPointUserGroups()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 226, in ensureMountPointUserGroups
    curGroups: list[str] = getUserGroups()
                           ^^^^^^^^^^^^^^^
TypeError: getUserGroups() missing 1 required positional argument: 'username'
2025-11-27 13:19:33,086 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:19:33,114 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:19:33,115 - INFO - parser.py:172 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 0 users.
2025-11-27 13:19:33,115 - ERROR - parser.py:174 - No users were created or updated from JSON data.
2025-11-27 13:19:33,115 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:19:33,145 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:19:33,145 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:19:50,327 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:19:50,358 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:19:50,358 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:19:50,359 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:19:50,378 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:19:50,382 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:19:50,383 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:50,383 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:50,384 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:50,384 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:50,384 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:19:50,384 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:19:50,385 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:19:50,386 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:19:50,386 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:19:50,386 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:19:50,387 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:19:50,387 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:50,387 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:50,387 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:19:50,388 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:19:50,388 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:19:50,390 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:19:50,391 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:19:50,391 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:19:50,391 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:19:50,392 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:19:50,392 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:19:50,393 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:19:50,393 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:19:50,393 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:19:50,393 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:19:50,394 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:19:50,394 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:19:50,395 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:19:50,395 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:19:50,395 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:50,396 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:50,396 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:19:50,396 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:19:50,397 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:19:50,397 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:19:50,398 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 13:19:50,398 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:19:50,398 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:19:50,399 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:19:50,399 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:19:50,399 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:19:50,399 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:19:50,400 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:19:50,400 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:19:50,400 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:19:50,400 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 13:20:01,062 - ERROR - parser.py:160 - Failed to ensure mountpoint user groups for user someuser: getUserGroups() missing 1 required positional argument: 'username'
2025-11-27 13:20:04,073 - ERROR - parser.py:161 - getUserGroups() missing 1 required positional argument: 'username'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 158, in createUserFromJson
    u.mountpointManager.ensureMountPointUserGroups()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 226, in ensureMountPointUserGroups
    curGroups: list[str] = getUserGroups()
                           ^^^^^^^^^^^^^^^
TypeError: getUserGroups() missing 1 required positional argument: 'username'
2025-11-27 13:20:06,638 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:20:06,671 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:20:08,723 - INFO - parser.py:172 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 0 users.
2025-11-27 13:20:08,723 - ERROR - parser.py:174 - No users were created or updated from JSON data.
2025-11-27 13:20:08,724 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:20:08,752 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:20:08,752 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:20:55,924 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:20:55,956 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:20:55,957 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:20:55,957 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:20:55,981 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:20:55,984 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:20:55,985 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:20:55,986 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:20:55,986 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:20:55,987 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:20:55,987 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:20:55,988 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:20:55,988 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:20:55,989 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:20:55,990 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:20:55,990 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:20:55,990 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:20:55,991 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:20:55,991 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:20:55,991 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:20:55,992 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:20:55,992 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:20:55,994 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:20:55,994 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:20:55,995 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:20:55,995 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:20:55,995 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:20:55,996 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:20:55,996 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:20:55,997 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:20:55,997 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:20:55,997 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:20:55,997 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:20:55,998 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:20:55,998 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:20:55,998 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:20:55,999 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:20:55,999 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:20:55,999 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:20:55,999 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:20:56,000 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:20:56,000 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:20:56,001 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 13:20:56,001 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:20:56,001 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:20:56,001 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:20:56,001 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:20:56,002 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:20:56,002 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:20:56,002 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:20:56,003 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:20:56,003 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:20:56,003 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 13:21:51,921 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 13:21:56,684 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:22:48,413 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:22:48,461 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:22:48,462 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:22:48,463 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:22:48,494 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:22:48,499 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:22:48,500 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:22:48,500 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:22:48,501 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:22:48,501 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:22:48,502 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:22:48,502 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:22:48,503 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:22:48,504 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:22:48,504 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:22:48,504 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:22:48,505 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:22:48,505 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:22:48,505 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:22:48,506 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:22:48,506 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:22:48,507 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:22:48,510 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:22:48,510 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:22:48,511 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:22:48,511 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:22:48,512 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:22:48,513 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:22:48,513 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:22:48,513 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:22:48,514 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:22:48,514 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:22:48,515 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:22:48,516 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:22:48,516 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:22:48,517 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:22:48,517 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:22:48,518 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:22:48,518 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:22:48,518 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:22:48,519 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:22:48,519 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:22:48,520 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 13:22:48,520 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:22:48,521 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:22:48,521 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:22:48,522 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:22:48,522 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:22:48,522 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:22:48,523 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:22:48,523 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:22:48,524 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:22:48,524 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 13:23:08,997 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 13:23:10,464 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:34:22,111 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:34:22,112 - INFO - parser.py:172 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 1 users.
2025-11-27 13:34:22,112 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:34:26,835 - INFO - ssh.py:282 -  < sshd service is not enabled. Enabling it.
2025-11-27 13:34:26,835 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:35:14,880 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:35:14,915 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:35:14,915 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:35:14,916 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:35:14,935 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:35:14,941 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 13:35:14,941 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:35:14,942 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:35:14,942 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:35:14,943 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:35:14,943 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 13:35:14,943 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 13:35:14,944 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 13:35:14,945 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:35:14,945 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:35:14,945 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:35:14,946 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:35:14,946 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:35:14,946 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:35:14,947 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:35:14,948 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:35:14,948 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:35:14,950 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 13:35:14,951 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 13:35:14,951 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 13:35:14,951 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 13:35:14,952 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 13:35:14,952 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 13:35:14,952 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 13:35:14,953 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 13:35:14,953 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 13:35:14,953 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 13:35:14,954 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 13:35:14,954 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 13:35:14,954 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 13:35:14,955 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 13:35:14,955 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:35:14,955 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:35:14,956 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 13:35:14,956 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 13:35:14,956 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 13:35:14,957 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 13:35:14,957 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 13:35:14,957 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:35:14,958 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:35:14,958 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:35:14,958 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:35:14,958 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:35:14,959 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:35:14,959 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:35:14,959 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:35:14,959 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:35:14,960 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 13:35:14,963 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 13:35:20,121 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:35:22,693 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 13:35:39,135 - INFO - parser.py:172 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 1 users.
2025-11-27 13:35:49,556 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:35:49,686 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 13:35:49,791 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:48:48,017 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:48:48,059 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:48:48,060 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:48:48,060 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:48:48,086 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:48:51,662 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 13:48:56,318 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:48:56,319 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:48:56,320 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:48:56,320 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:48:56,321 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:48:56,322 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:48:56,322 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:48:56,323 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:48:56,323 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:48:57,295 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 13:49:04,553 - INFO - user.py:226 - Killing all processes for user someuser before deletion.
2025-11-27 13:49:11,207 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.
2025-11-27 13:49:11,207 - ERROR - sftp.py:38 - Failed to delete user someuser: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 200, in __killUserProcesses
    subprocess.run([
  File "/usr/lib/python3.12/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 227, in delete_user
    self.__killUserProcesses()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 206, in __killUserProcesses
    raise RuntimeError(f"Failed to kill processes for user {self.username}: {e}")
RuntimeError: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 272, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.
2025-11-27 13:49:11,215 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:49:11,250 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 13:49:11,363 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:49:47,415 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:49:47,449 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:49:47,449 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:49:47,450 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:49:47,468 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:49:47,473 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 13:49:47,475 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:49:47,475 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:49:47,476 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:49:47,476 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:49:47,477 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:49:47,477 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:49:47,477 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:49:47,478 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:49:47,478 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:49:47,480 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 13:49:49,329 - INFO - user.py:226 - Killing all processes for user someuser before deletion.
2025-11-27 13:50:21,900 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.
2025-11-27 13:50:21,901 - ERROR - sftp.py:38 - Failed to delete user someuser: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 200, in __killUserProcesses
    subprocess.run([
  File "/usr/lib/python3.12/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 227, in delete_user
    self.__killUserProcesses()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 206, in __killUserProcesses
    raise RuntimeError(f"Failed to kill processes for user {self.username}: {e}")
RuntimeError: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 272, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: Failed to kill processes for user someuser: Command '['pkill', '-u', 'someuser']' returned non-zero exit status 1.
2025-11-27 13:50:21,904 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:50:21,935 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 13:50:22,008 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:51:06,374 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:51:06,408 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:51:06,408 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:51:06,410 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:51:06,428 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:51:06,431 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 13:51:06,434 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:51:06,434 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:51:06,435 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:51:06,435 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:51:06,436 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:51:06,436 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:51:06,436 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:51:06,437 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:51:06,437 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:51:06,439 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 13:51:08,579 - INFO - user.py:228 - Killing all processes for user someuser before deletion.
2025-11-27 13:51:17,047 - INFO - user.py:232 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 13:51:29,031 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: [Errno 2] No such file or directory: 'lsof'
2025-11-27 13:51:29,031 - ERROR - sftp.py:38 - Failed to delete user someuser: [Errno 2] No such file or directory: 'lsof'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 233, in delete_user
    if not self.mountpointManager.umount_will_be_ok():
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 103, in umount_will_be_ok
    if not can_umount(mp.mountPath):
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 267, in can_umount
    proc = subprocess.run(
           ^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/subprocess.py", line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/lib/python3.12/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: 'lsof'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 274, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: [Errno 2] No such file or directory: 'lsof'
2025-11-27 13:51:29,035 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:51:29,066 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 13:51:29,136 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:55:22,951 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:55:22,986 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:55:22,986 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:55:22,987 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:55:29,087 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:55:29,093 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 13:55:29,095 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:55:29,096 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:55:29,097 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:55:29,097 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:55:29,097 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:55:29,098 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:55:29,098 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:55:29,099 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:55:29,100 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:55:29,102 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 13:55:43,103 - INFO - user.py:228 - Killing all processes for user someuser before deletion.
2025-11-27 13:56:13,025 - INFO - user.py:232 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 13:56:42,640 - INFO - user.py:238 - Deleting all mountpoints for user someuser.
2025-11-27 13:57:13,369 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-27 13:57:13,371 - ERROR - sftp.py:38 - Failed to delete user someuser: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 86, in deleteOneMountpoint
    os.rmdir(mp_to_delete.mountPath)
OSError: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 239, in delete_user
    self.mountpointManager.deleteMountpoint(None)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 199, in deleteMountpoint
    self.deleteOneMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 91, in deleteOneMountpoint
    raise RuntimeError(f"Failed to delete mountpoint {mount_point.mountName} for user {self.username}: {e}")
RuntimeError: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 274, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-27 13:57:13,375 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 13:57:13,404 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 13:57:13,475 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 13:57:57,592 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 13:57:57,624 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 13:57:57,625 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 13:57:57,626 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 13:57:57,650 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 13:57:57,654 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 13:57:57,656 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 13:57:57,656 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 13:57:57,657 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 13:57:57,657 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 13:57:57,657 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 13:57:57,658 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 13:57:57,658 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 13:57:57,659 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 13:57:57,659 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 13:57:57,661 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 13:57:57,661 - INFO - user.py:228 - Killing all processes for user someuser before deletion.
2025-11-27 13:57:59,717 - INFO - user.py:232 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 13:58:00,038 - INFO - user.py:238 - Deleting all mountpoints for user someuser.
2025-11-27 14:05:52,949 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:05:52,985 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:05:52,985 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:05:52,986 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:06:13,931 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:06:13,964 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:06:13,964 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:06:13,965 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:06:13,990 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:06:13,995 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 14:06:13,997 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:06:13,998 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:06:13,998 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:06:13,998 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:06:13,999 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:06:13,999 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:06:13,999 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:06:14,000 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:06:14,000 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:06:14,002 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 14:06:14,002 - INFO - user.py:228 - Killing all processes for user someuser before deletion.
2025-11-27 14:06:16,057 - INFO - user.py:232 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 14:06:16,362 - INFO - user.py:238 - Deleting all mountpoints for user someuser.
2025-11-27 14:15:38,138 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: Failed to delete mountpoint opis for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/opis'
2025-11-27 14:15:38,138 - ERROR - sftp.py:38 - Failed to delete user someuser: Failed to delete mountpoint opis for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/opis'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 86, in deleteOneMountpoint
    os.rmdir(mp_to_delete.mountPath)
OSError: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/opis'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 239, in delete_user
    self.mountpointManager.deleteMountpoint(None)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 199, in deleteMountpoint
    self.deleteOneMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 91, in deleteOneMountpoint
    raise RuntimeError(f"Failed to delete mountpoint {mount_point.mountName} for user {self.username}: {e}")
RuntimeError: Failed to delete mountpoint opis for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/opis'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 274, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: Failed to delete mountpoint opis for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/opis'
2025-11-27 14:15:38,142 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:15:38,174 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:15:38,249 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:15:57,258 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:15:57,291 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:15:57,291 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:15:57,292 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:15:57,317 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:15:57,324 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 14:15:57,326 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:15:57,326 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:15:57,327 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:15:57,327 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:15:57,327 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:15:57,327 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:15:57,328 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:15:57,329 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:15:57,329 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:15:57,330 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 14:15:57,330 - INFO - user.py:228 - Killing all processes for user someuser before deletion.
2025-11-27 14:15:59,386 - INFO - user.py:232 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 14:15:59,387 - INFO - user.py:238 - Deleting all mountpoints for user someuser.
2025-11-27 14:16:16,818 - INFO - user.py:242 - Deleting all certificates for user someuser.
2025-11-27 14:16:18,000 - DEBUG - user.py:244 - Certificates to delete for user someuser: ['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDGj0AeXyJQA1ChL2t5X3hAarICoiD6IEV7qnm9lj7F2YUMAP3le/pZR29/5tP2abodcH0F7CC2BRsQoFsD1V7EYDX610dSJdTrOZQl7WH+zV3E2JcY96T8kChlnn8gSZs9Ein9W+95INH/zQJx4YBhLdqnZKSXCh7sHdFftTAClyQIGdQC+zLwLkgqtlU7L0bAsqfw3zdEN6GLFnOgK8kyFol6pzoab+OLXUFwPhJ++3dAi29FUBcE1bWfvaXW7ZczapEotOhRbaXOrF9QIb9AjijnUkDpw8GmaLC2IFT5mtliChB8Zlo7cdNfoaTzfkpdPmLY8GQD4UDd8BsKQq14W4n5uLCUizVT2BYpG13MxQixAhU2hBF6e7Zep6/Hde1a/NuK4nxV0ZKo8qnLdZi0NK5Q0LQTrEe9mCBWcWJphos2TlgEITEszLZgD13NLLNDlpW+FwOvX894Q3uepzP3rLkbC70I8HWtTUSR3dV0My7mpQFDLgJa+mOUGuUGSoqx5mK2ARXjNxM1H/7a9v/pt1giOwKRnn4N7GzgxEnUjVsF28E2q/gtEE2ptTJ8ZbYUMGsLPqbnFUR/syjQvQpK7KWCF/C3uagNVXJQaC3vAa7rzruvMR/azgN39BV8sfraAF99VVW7a4doebv/dVykSnOXtQUWezBDWBNEHoOxTw== zlkl\\zednik@PC-ZEDNIK']
2025-11-27 14:16:21,838 - INFO - ssh.py:140 - Deleting SSH key for user someuser
2025-11-27 14:16:21,839 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:16:21,839 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:16:21,840 - INFO - ssh.py:165 -  < Successfully removed SSH key for user someuser.
2025-11-27 14:16:30,762 - INFO - user.py:249 - Removing sshd configuration for user someuser.
2025-11-27 14:17:02,784 - INFO - ssh.py:116 - Removing sshd config for user someuser
2025-11-27 14:17:02,784 - INFO - ssh.py:119 -  - Found sshd config for user someuser at /etc/ssh/sshd_config.d/sftp-someuser.conf. Deleting it.
2025-11-27 14:17:02,785 - INFO - ssh.py:122 -  < Successfully removed sshd config for user someuser and restarted sshd.
2025-11-27 14:17:04,573 - INFO - user.py:253 - Removing user someuser from all SFTP groups.
2025-11-27 14:17:54,215 - INFO - user.py:257 - Deleting user someuser from system.
2025-11-27 14:18:34,989 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: Failed to delete user someuser: Command '['userdel', '-r', 'someuser']' returned non-zero exit status 12.
2025-11-27 14:18:34,990 - ERROR - sftp.py:38 - Failed to delete user someuser: Failed to delete user someuser: Command '['userdel', '-r', 'someuser']' returned non-zero exit status 12.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 259, in delete_user
    subprocess.run([
  File "/usr/lib/python3.12/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['userdel', '-r', 'someuser']' returned non-zero exit status 12.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 265, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: Command '['userdel', '-r', 'someuser']' returned non-zero exit status 12.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 274, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: Failed to delete user someuser: Command '['userdel', '-r', 'someuser']' returned non-zero exit status 12.
2025-11-27 14:18:34,994 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:18:35,024 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:18:35,085 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:18:53,378 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:18:53,413 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:18:53,413 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:18:53,414 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:18:53,439 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:18:53,443 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 14:18:53,445 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:18:53,477 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:18:53,543 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:27:56,200 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:27:56,242 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:27:56,242 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:27:56,243 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:27:56,287 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:28:01,032 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 14:28:05,656 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:28:14,182 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:28:17,565 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:28:21,932 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:28:23,599 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:28:26,729 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 14:29:36,175 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:29:36,177 - INFO - ssh.py:241 -  - Jail directory /home_sftp_users/someuser/__sftp__ does not exist for user someuser. Creating it.
2025-11-27 14:29:36,178 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:29:36,178 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:29:36,179 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:29:36,180 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:29:36,180 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:29:36,181 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:29:36,182 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:29:44,155 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:29:56,901 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:30:02,861 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:30:02,862 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:30:02,862 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:30:02,863 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:30:02,863 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:30:02,864 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:30:35,839 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:30:45,414 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 14:30:46,591 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 14:30:47,695 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 14:30:50,755 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 14:30:51,980 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:30:51,981 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:30:51,982 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:30:51,982 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:30:51,983 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:30:51,983 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:30:51,984 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:30:51,984 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:30:51,985 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:30:52,962 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 14:30:54,725 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 14:30:55,268 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:30:55,269 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:30:55,270 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:30:55,270 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:30:55,271 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:30:55,271 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:30:55,272 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:30:55,273 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:30:55,273 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:31:14,101 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 14:31:15,307 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 14:31:16,208 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 14:31:18,942 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 14:31:20,997 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 14:31:21,368 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 14:31:22,092 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 14:31:23,285 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 14:31:23,287 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:31:23,288 - INFO - ssh.py:58 -  < Successfully ensured .ssh directory for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:31:23,288 - INFO - ssh.py:200 -  - No existing authorized_keys file for user someuser. It will be created.
2025-11-27 14:31:23,288 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 14:31:23,289 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 14:31:23,289 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 14:31:24,609 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 14:31:55,398 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:31:55,399 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:31:55,400 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:31:55,400 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:31:55,400 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:31:55,401 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:31:55,401 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:31:55,402 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:31:55,403 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:32:00,698 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 14:32:23,410 - ERROR - parser.py:160 - Failed to ensure mountpoint user groups for user someuser: Failed to ensure mountpoint user groups for user someuser: addUSerToGroup() missing 1 required positional argument: 'group_name'
2025-11-27 14:32:30,199 - ERROR - parser.py:161 - Failed to ensure mountpoint user groups for user someuser: addUSerToGroup() missing 1 required positional argument: 'group_name'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 239, in ensureMountPointUserGroups
    addUSerToGroup(group_name)
TypeError: addUSerToGroup() missing 1 required positional argument: 'group_name'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 158, in createUserFromJson
    u.mountpointManager.ensureMountPointUserGroups()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 241, in ensureMountPointUserGroups
    raise RuntimeError(f"Failed to ensure mountpoint user groups for user {self.username}: {e}")
RuntimeError: Failed to ensure mountpoint user groups for user someuser: addUSerToGroup() missing 1 required positional argument: 'group_name'
2025-11-27 14:32:33,043 - INFO - parser.py:171 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 0 users.
2025-11-27 14:32:34,681 - ERROR - parser.py:173 - No users were created or updated from JSON data.
2025-11-27 14:32:34,681 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:32:34,737 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:32:34,811 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:32:42,733 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:32:42,765 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:32:42,765 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:32:42,766 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:32:42,791 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:32:46,754 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 14:32:46,755 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:32:46,755 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:32:46,756 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:32:46,757 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:32:46,757 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:32:46,757 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 14:32:46,758 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 14:32:46,759 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:32:46,760 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:32:46,760 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:32:46,760 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:32:46,761 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:32:46,761 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:32:46,761 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:32:46,762 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:32:46,762 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:32:46,764 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 14:32:46,764 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 14:32:46,764 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 14:32:46,764 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 14:32:46,765 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 14:32:46,765 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 14:32:46,766 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 14:32:46,766 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 14:32:46,766 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 14:32:46,767 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 14:32:46,767 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 14:32:46,767 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 14:32:46,768 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 14:32:46,768 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 14:32:46,768 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:32:46,769 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:32:46,769 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 14:32:46,769 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 14:32:46,770 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 14:32:46,770 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 14:32:46,770 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 14:32:46,770 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:32:46,771 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:32:46,771 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:32:46,771 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:32:46,771 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:32:46,772 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:32:46,772 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:32:46,772 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:32:46,772 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:32:46,773 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 14:33:36,794 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:33:36,825 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:33:36,825 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:33:36,826 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:33:36,851 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:33:36,855 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 14:33:36,855 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:36,856 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:36,856 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:36,856 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:36,857 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:36,857 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 14:33:36,858 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 14:33:36,858 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:33:36,859 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:33:36,859 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:33:36,859 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:33:36,859 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:33:36,860 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:33:36,860 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:33:36,860 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:33:36,861 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:33:36,862 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 14:33:36,863 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 14:33:36,863 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 14:33:36,864 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 14:33:36,864 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 14:33:36,865 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 14:33:36,865 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 14:33:36,865 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 14:33:36,866 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 14:33:36,866 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 14:33:36,866 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 14:33:36,866 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 14:33:36,867 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 14:33:36,867 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 14:33:36,868 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:33:36,868 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:33:36,868 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 14:33:36,869 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 14:33:36,869 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 14:33:36,869 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 14:33:36,870 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 14:33:36,870 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:33:36,870 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:33:36,870 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:33:36,871 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:33:36,871 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:33:36,871 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:33:36,871 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:33:36,872 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:33:36,872 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:33:36,872 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 14:33:48,666 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:33:48,696 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:33:48,697 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:33:48,697 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:33:48,721 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:33:48,724 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 14:33:48,725 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:48,725 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:48,726 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:48,726 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:48,726 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:33:48,727 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 14:33:48,727 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 14:33:48,728 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:33:48,728 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:33:48,729 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:33:48,729 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:33:48,729 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:33:48,730 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:33:48,730 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:33:48,730 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:33:48,731 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:33:48,733 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 14:33:48,733 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 14:33:48,733 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 14:33:48,733 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 14:33:48,734 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 14:33:48,734 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 14:33:48,735 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 14:33:48,735 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 14:33:48,735 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 14:33:48,735 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 14:33:48,736 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 14:33:48,736 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 14:33:48,737 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 14:33:48,737 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 14:33:48,737 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:33:48,737 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:33:48,738 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 14:33:48,738 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 14:33:48,738 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 14:33:48,739 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 14:33:48,739 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 14:33:48,740 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:33:48,740 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:33:48,740 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:33:48,740 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:33:48,741 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:33:48,741 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:33:48,741 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:33:48,742 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:33:48,742 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:33:48,742 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 14:34:23,557 - ERROR - parser.py:160 - Failed to ensure mountpoint user groups for user someuser: Failed to ensure mountpoint user groups for user someuser: checkUserInGroup() missing 1 required positional argument: 'group_name'
2025-11-27 14:34:23,558 - ERROR - parser.py:161 - Failed to ensure mountpoint user groups for user someuser: checkUserInGroup() missing 1 required positional argument: 'group_name'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 239, in ensureMountPointUserGroups
    addUSerToGroup(self.username, group_name)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/userGrps.py", line 68, in addUSerToGroup
    if checkUserInGroup(group_name):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: checkUserInGroup() missing 1 required positional argument: 'group_name'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 158, in createUserFromJson
    u.mountpointManager.ensureMountPointUserGroups()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 241, in ensureMountPointUserGroups
    raise RuntimeError(f"Failed to ensure mountpoint user groups for user {self.username}: {e}")
RuntimeError: Failed to ensure mountpoint user groups for user someuser: checkUserInGroup() missing 1 required positional argument: 'group_name'
2025-11-27 14:34:23,561 - INFO - parser.py:171 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 0 users.
2025-11-27 14:34:23,562 - ERROR - parser.py:173 - No users were created or updated from JSON data.
2025-11-27 14:34:23,562 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:34:23,592 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:34:23,657 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:34:42,426 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:34:42,460 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:34:42,460 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:34:42,461 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:34:42,485 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:34:42,489 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 14:34:42,490 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:34:42,490 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:34:42,491 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:34:42,491 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:34:42,491 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:34:42,492 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 14:34:42,492 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 14:34:42,493 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:34:42,493 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:34:42,493 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:34:42,494 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:34:42,494 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:34:42,495 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:34:42,495 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:34:42,496 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:34:42,496 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:34:42,498 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 14:34:42,498 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 14:34:42,498 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 14:34:42,498 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 14:34:42,499 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 14:34:42,499 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 14:34:42,500 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 14:34:42,500 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 14:34:42,500 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 14:34:42,501 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 14:34:42,501 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 14:34:42,502 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 14:34:42,502 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 14:34:42,503 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 14:34:42,503 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:34:42,503 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:34:42,503 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 14:34:42,504 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 14:34:42,505 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 14:34:42,505 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 14:34:42,505 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 14:34:42,506 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:34:42,506 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:34:42,506 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:34:42,506 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:34:42,507 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:34:42,507 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:34:42,507 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:34:42,508 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:34:42,508 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:34:42,508 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 14:35:12,575 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 14:35:14,880 - INFO - parser.py:171 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 1 users.
2025-11-27 14:35:16,539 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:35:16,568 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:35:16,630 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:42:42,162 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:42:42,193 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:42:42,193 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:42:42,194 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:42:42,219 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:42:42,223 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 14:42:42,225 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:42:42,226 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:42:42,226 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:42:42,227 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:42:42,227 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:42:42,227 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:42:42,228 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:42:42,228 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:42:42,228 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:42:42,230 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 14:42:45,436 - INFO - user.py:228 - Killing all processes for user someuser before deletion.
2025-11-27 14:42:49,979 - INFO - user.py:232 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 14:42:52,612 - INFO - user.py:238 - Deleting all mountpoints for user someuser.
2025-11-27 14:43:13,601 - WARNING - user.py:244 - Home directory /home_sftp_users/someuser of user someuser is not empty after removing mountpoints.
2025-11-27 14:43:14,193 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:43:14,193 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:43:16,892 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: No module named 'bcrypt'
2025-11-27 14:43:16,892 - ERROR - sftp.py:38 - Failed to delete user someuser: No module named 'bcrypt'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 245, in delete_user
    from ..input import confirm
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/input.py", line 7, in <module>
    import re, bcrypt, getpass
ModuleNotFoundError: No module named 'bcrypt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 298, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: No module named 'bcrypt'
2025-11-27 14:43:16,895 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:43:16,924 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:43:16,987 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:46:59,247 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:46:59,303 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:46:59,303 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:46:59,304 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:46:59,323 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:46:59,323 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:46:59,341 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:46:59,341 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:46:59,380 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:46:59,385 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 14:46:59,390 - INFO - ssh.py:232 - Ensuring jail directory for user someuser
2025-11-27 14:46:59,392 - INFO - ssh.py:244 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:46:59,392 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:46:59,393 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:46:59,394 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:46:59,394 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:46:59,394 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:46:59,395 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:46:59,396 - INFO - ssh.py:267 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:46:59,397 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 14:46:59,397 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-27 14:47:01,462 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 14:47:01,463 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-27 14:47:01,463 - WARNING - user.py:245 - Home directory /home_sftp_users/someuser of user someuser is not empty after removing mountpoints.
2025-11-27 14:47:12,949 - WARNING - user.py:248 - User deletion for someuser was cancelled by user due to non-empty home directory.
2025-11-27 14:47:12,950 - ERROR - sftp.py:37 - Failed to uninstall user someuser: Failed to delete user someuser: User deletion for someuser was cancelled by user due to non-empty home directory.
2025-11-27 14:47:12,950 - ERROR - sftp.py:38 - Failed to delete user someuser: User deletion for someuser was cancelled by user due to non-empty home directory.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 249, in delete_user
    raise RuntimeError(msg)
RuntimeError: User deletion for someuser was cancelled by user due to non-empty home directory.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/sftp.py", line 35, in main
    u.delete_user()
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/user.py", line 298, in delete_user
    raise RuntimeError(f"Failed to delete user {self.username}: {e}")
RuntimeError: Failed to delete user someuser: User deletion for someuser was cancelled by user due to non-empty home directory.
2025-11-27 14:47:12,952 - INFO - ssh.py:275 - Restarting sshd service
2025-11-27 14:47:13,009 - INFO - ssh.py:285 -  - Stopping sshd service before restart.
2025-11-27 14:47:13,094 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:50:06,867 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:50:06,906 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:50:06,906 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:50:06,907 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:50:06,920 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:50:06,920 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:50:06,934 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:50:06,935 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:50:06,960 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:50:06,964 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 14:50:06,966 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:50:06,967 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:50:06,967 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:50:06,968 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:50:06,968 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:50:06,969 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:50:06,969 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:50:06,970 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:50:06,970 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:50:06,971 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 14:50:06,971 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-27 14:50:09,023 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 14:50:09,024 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-27 14:50:13,159 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:50:13,160 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:50:13,160 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:50:13,161 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:50:13,162 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:50:13,162 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:50:13,163 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:50:13,164 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:50:13,164 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:50:21,228 - WARNING - user.py:246 - Home directory /home_sftp_users/someuser of user someuser is not empty after removing mountpoints.
2025-11-27 14:51:23,193 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:51:23,226 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:51:23,227 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:51:23,227 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:51:23,238 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:51:23,238 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:51:23,252 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:51:23,252 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:51:23,275 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:51:23,279 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 14:51:23,281 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:51:23,282 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:51:23,282 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:51:23,282 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:51:23,283 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:51:23,283 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:51:23,283 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:51:23,284 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:51:23,284 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:51:23,285 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 14:51:23,285 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-27 14:51:25,340 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 14:51:25,341 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-27 14:51:27,473 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:51:27,474 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:51:27,474 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:51:27,475 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:51:27,475 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:51:27,476 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:51:27,476 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:51:27,477 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:51:27,478 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:51:29,392 - INFO - user.py:253 - Deleting all certificates for user someuser.
2025-11-27 14:51:31,907 - DEBUG - user.py:255 - Certificates to delete for user someuser: ['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDGj0AeXyJQA1ChL2t5X3hAarICoiD6IEV7qnm9lj7F2YUMAP3le/pZR29/5tP2abodcH0F7CC2BRsQoFsD1V7EYDX610dSJdTrOZQl7WH+zV3E2JcY96T8kChlnn8gSZs9Ein9W+95INH/zQJx4YBhLdqnZKSXCh7sHdFftTAClyQIGdQC+zLwLkgqtlU7L0bAsqfw3zdEN6GLFnOgK8kyFol6pzoab+OLXUFwPhJ++3dAi29FUBcE1bWfvaXW7ZczapEotOhRbaXOrF9QIb9AjijnUkDpw8GmaLC2IFT5mtliChB8Zlo7cdNfoaTzfkpdPmLY8GQD4UDd8BsKQq14W4n5uLCUizVT2BYpG13MxQixAhU2hBF6e7Zep6/Hde1a/NuK4nxV0ZKo8qnLdZi0NK5Q0LQTrEe9mCBWcWJphos2TlgEITEszLZgD13NLLNDlpW+FwOvX894Q3uepzP3rLkbC70I8HWtTUSR3dV0My7mpQFDLgJa+mOUGuUGSoqx5mK2ARXjNxM1H/7a9v/pt1giOwKRnn4N7GzgxEnUjVsF28E2q/gtEE2ptTJ8ZbYUMGsLPqbnFUR/syjQvQpK7KWCF/C3uagNVXJQaC3vAa7rzruvMR/azgN39BV8sfraAF99VVW7a4doebv/dVykSnOXtQUWezBDWBNEHoOxTw== zlkl\\zednik@PC-ZEDNIK']
2025-11-27 14:51:34,318 - INFO - ssh.py:140 - Deleting SSH key for user someuser
2025-11-27 14:51:34,319 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:51:34,319 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:51:34,322 - INFO - ssh.py:165 -  < Successfully removed SSH key for user someuser.
2025-11-27 14:51:54,623 - INFO - user.py:260 - Removing sshd configuration for user someuser.
2025-11-27 14:51:56,872 - INFO - ssh.py:116 - Removing sshd config for user someuser
2025-11-27 14:51:56,873 - INFO - ssh.py:119 -  - Found sshd config for user someuser at /etc/ssh/sshd_config.d/sftp-someuser.conf. Deleting it.
2025-11-27 14:51:56,874 - INFO - ssh.py:122 -  < Successfully removed sshd config for user someuser and restarted sshd.
2025-11-27 14:52:00,009 - INFO - user.py:264 - Removing user someuser from all SFTP groups.
2025-11-27 14:52:04,634 - INFO - user.py:268 - Deleting user someuser from system.
2025-11-27 14:52:07,115 - INFO - user.py:271 - Setting ownership and permissions for home directory /home_sftp_users/someuser of user someuser before deletion.
2025-11-27 14:52:26,376 - INFO - user.py:282 - Deleting user someuser and its home directory /home_sftp_users/someuser.
2025-11-27 14:52:36,068 - INFO - user.py:293 - Ensuring home directory /home_sftp_users/someuser of user someuser is removed.
2025-11-27 14:52:42,023 - INFO - ssh.py:279 - Restarting sshd service
2025-11-27 14:52:42,055 - INFO - ssh.py:289 -  - Stopping sshd service before restart.
2025-11-27 14:52:45,963 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 14:54:06,064 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 14:54:06,099 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:54:06,100 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 14:54:06,101 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 14:54:06,114 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:54:06,114 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:54:06,126 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 14:54:06,126 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 14:54:06,149 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 14:54:06,153 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 14:54:06,153 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:54:06,154 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:54:06,155 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:54:06,155 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:54:06,156 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 14:54:06,156 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 14:54:18,591 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:54:18,591 - INFO - ssh.py:245 -  - Jail directory /home_sftp_users/someuser/__sftp__ does not exist for user someuser. Creating it.
2025-11-27 14:54:18,592 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:54:18,592 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:54:18,593 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:54:18,593 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:54:18,593 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:54:18,594 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:54:18,594 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:54:18,595 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:54:18,595 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:54:18,595 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:54:18,596 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:54:18,596 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:54:18,596 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:54:18,597 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:54:18,598 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:54:18,598 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:54:18,598 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 14:54:18,599 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 14:54:18,599 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 14:54:18,600 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 14:54:18,600 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:54:18,601 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:54:18,601 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:54:18,602 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:54:18,602 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:54:18,602 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:54:18,602 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:54:18,604 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:54:18,604 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:54:18,608 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 14:54:18,611 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 14:54:18,611 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:54:18,611 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:54:18,612 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:54:18,612 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:54:18,612 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:54:18,612 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 14:54:18,613 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:54:18,613 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:54:18,613 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:54:18,617 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 14:54:18,618 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 14:54:18,619 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 14:54:18,619 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 14:54:18,620 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 14:54:18,620 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 14:54:18,621 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 14:54:18,622 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 14:54:18,622 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:54:18,623 - INFO - ssh.py:58 -  < Successfully ensured .ssh directory for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:54:18,623 - INFO - ssh.py:200 -  - No existing authorized_keys file for user someuser. It will be created.
2025-11-27 14:54:18,623 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 14:54:18,624 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 14:54:18,625 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 14:54:18,626 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 14:54:18,627 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 14:54:18,628 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 14:54:18,629 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 14:54:18,629 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 14:54:18,629 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 14:54:18,630 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 14:54:18,630 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 14:54:18,631 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 14:54:18,632 - INFO - ssh.py:271 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 14:54:18,632 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 14:54:18,704 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 14:54:18,704 - INFO - parser.py:171 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 1 users.
2025-11-27 14:54:18,705 - INFO - ssh.py:279 - Restarting sshd service
2025-11-27 14:54:18,733 - INFO - ssh.py:289 -  - Stopping sshd service before restart.
2025-11-27 14:54:18,801 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 15:00:05,711 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 15:00:05,744 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:00:05,744 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 15:00:05,745 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 15:00:05,755 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:00:05,756 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:00:05,772 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:00:05,772 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:00:05,795 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 15:00:05,800 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 15:00:05,801 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:00:05,801 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:00:05,802 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:00:05,802 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:00:05,803 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:00:05,803 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 15:00:05,804 - INFO - parser.py:88 - User someuser already exists, skipping creation.
2025-11-27 15:00:05,805 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:00:05,805 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:00:13,444 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:00:13,445 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:00:13,446 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:00:13,446 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:00:13,446 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:00:13,447 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:00:13,448 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:00:13,451 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 15:00:13,451 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 15:00:13,451 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 15:00:13,452 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 15:00:13,452 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 15:00:13,453 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 15:00:13,453 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 15:00:13,453 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 15:00:13,453 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 15:00:13,454 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 15:00:13,454 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 15:00:13,454 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 15:00:13,455 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 15:00:13,455 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 15:00:13,455 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:00:13,456 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:00:13,456 - INFO - ssh.py:190 -  - Loading existing authorized_keys for user someuser.
2025-11-27 15:00:13,456 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 15:00:13,457 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 15:00:13,457 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 15:00:13,458 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 15:00:13,458 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:00:13,459 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:00:13,459 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:00:13,459 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:00:13,460 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:00:13,460 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:00:13,460 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:00:13,461 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:00:13,461 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:00:13,462 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 15:00:13,465 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 15:00:13,465 - INFO - parser.py:171 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 1 users.
2025-11-27 15:00:13,466 - INFO - ssh.py:280 - Restarting sshd service
2025-11-27 15:00:13,497 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-27 15:00:13,566 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 15:03:48,041 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 15:03:48,074 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:03:48,075 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 15:03:48,075 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 15:03:48,085 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:03:48,085 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:03:48,098 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:03:48,099 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:03:48,123 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 15:03:48,127 - INFO - sftp.py:31 - Uninstalling SFTP user: someuser
2025-11-27 15:03:48,129 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:03:48,129 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:03:48,130 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:03:48,130 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:03:48,130 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:03:48,131 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:03:48,131 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:03:48,131 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:03:48,132 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:03:48,134 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 15:03:48,134 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-27 15:03:50,193 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 15:03:50,487 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-27 15:03:50,801 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:03:50,801 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:03:50,802 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:03:50,802 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:03:50,802 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:03:50,803 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:03:50,803 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:03:50,804 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:03:50,804 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:03:50,804 - INFO - user.py:253 - Deleting all certificates for user someuser.
2025-11-27 15:03:50,805 - DEBUG - user.py:255 - Certificates to delete for user someuser
2025-11-27 15:03:50,805 - INFO - ssh.py:140 - Deleting SSH key for user someuser
2025-11-27 15:03:50,806 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:03:50,806 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:03:50,806 - INFO - ssh.py:165 -  < Successfully removed SSH key for user someuser.
2025-11-27 15:03:50,807 - INFO - user.py:260 - Removing sshd configuration for user someuser.
2025-11-27 15:03:50,807 - INFO - ssh.py:116 - Removing sshd config for user someuser
2025-11-27 15:03:50,807 - INFO - ssh.py:119 -  - Found sshd config for user someuser at /etc/ssh/sshd_config.d/sftp-someuser.conf. Deleting it.
2025-11-27 15:03:50,808 - INFO - ssh.py:122 -  < Successfully removed sshd config for user someuser and restarted sshd.
2025-11-27 15:03:50,808 - INFO - user.py:264 - Removing user someuser from all SFTP groups.
2025-11-27 15:03:50,860 - INFO - user.py:268 - Deleting user someuser from system.
2025-11-27 15:03:50,860 - INFO - user.py:271 - Setting ownership and permissions for home directory /home_sftp_users/someuser of user someuser before deletion.
2025-11-27 15:03:50,860 - INFO - user.py:282 - Deleting user someuser and its home directory /home_sftp_users/someuser.
2025-11-27 15:03:50,929 - INFO - user.py:293 - Ensuring home directory /home_sftp_users/someuser of user someuser is removed.
2025-11-27 15:03:50,930 - INFO - ssh.py:280 - Restarting sshd service
2025-11-27 15:03:50,958 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-27 15:03:51,023 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 15:11:43,799 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 15:11:43,834 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:11:43,835 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 15:11:43,836 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 15:11:43,850 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:11:43,850 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:11:43,863 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:11:43,864 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:11:43,892 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 15:11:43,896 - INFO - sftp.py:28 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.json
2025-11-27 15:11:43,896 - INFO - parser.py:52 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:11:43,897 - INFO - parser.py:56 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:11:43,897 - INFO - parser.py:65 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:11:43,898 - INFO - parser.py:69 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:11:43,898 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.json.
2025-11-27 15:11:43,898 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 15:11:43,972 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:11:43,972 - INFO - ssh.py:245 -  - Jail directory /home_sftp_users/someuser/__sftp__ does not exist for user someuser. Creating it.
2025-11-27 15:11:43,973 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:11:43,973 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:11:43,974 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:11:43,974 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:11:43,974 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:11:43,975 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:11:43,975 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:11:43,975 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:11:43,976 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:11:43,976 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:11:43,976 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:11:43,976 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:11:43,977 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:11:43,977 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:11:43,977 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:11:43,978 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:11:43,978 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 15:11:43,979 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 15:11:43,979 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 15:11:43,981 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 15:11:43,981 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:11:43,982 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:11:43,982 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:11:43,982 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:11:43,983 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:11:43,983 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:11:43,983 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:11:43,984 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:11:43,984 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:11:43,985 - INFO - mountPoint.py:163 - Creating mountpoint /home_sftp_users/someuser/__sftp__/img for user someuser.
2025-11-27 15:11:46,392 - INFO - mountPoint.py:135 - Setting ownership and permissions for mountpoint path /home_sftp_users/someuser/__sftp__/img.
2025-11-27 15:11:51,409 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 15:11:51,410 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 15:11:51,410 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:11:51,410 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:11:51,410 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:11:51,411 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:11:51,411 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:11:51,411 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:11:51,411 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:11:51,412 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:11:51,412 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:11:51,413 - INFO - mountPoint.py:163 - Creating mountpoint /home_sftp_users/someuser/__sftp__/opis for user someuser.
2025-11-27 15:11:52,466 - INFO - mountPoint.py:135 - Setting ownership and permissions for mountpoint path /home_sftp_users/someuser/__sftp__/opis.
2025-11-27 15:11:57,762 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 15:11:57,762 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 15:11:57,762 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 15:11:57,762 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 15:11:57,763 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 15:11:57,763 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 15:11:57,764 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 15:11:57,764 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 15:11:57,764 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:11:57,765 - INFO - ssh.py:58 -  < Successfully ensured .ssh directory for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:11:57,765 - INFO - ssh.py:200 -  - No existing authorized_keys file for user someuser. It will be created.
2025-11-27 15:11:57,765 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 15:11:57,766 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 15:11:57,766 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 15:11:57,766 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 15:11:57,767 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:11:57,767 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:11:57,767 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:11:57,768 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:11:57,768 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:11:57,768 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:11:57,768 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:11:57,769 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:11:57,769 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:11:57,769 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 15:11:57,842 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 15:11:57,842 - INFO - parser.py:171 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.json. Created/updated 1 users.
2025-11-27 15:11:57,843 - INFO - ssh.py:280 - Restarting sshd service
2025-11-27 15:11:57,869 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-27 15:11:57,939 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 15:12:57,382 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 15:12:57,396 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:12:57,396 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 15:12:57,397 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 15:12:57,401 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:12:57,403 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:12:57,408 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:12:57,408 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:12:57,424 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 15:14:30,119 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 15:14:30,134 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:14:30,134 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 15:14:30,135 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 15:14:30,140 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:14:30,141 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:14:30,146 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:14:30,147 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:14:30,162 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 15:14:30,163 - INFO - sftp.py:31 - Uninstalling SFTP user: None
2025-11-27 15:14:30,165 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:14:30,165 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:14:30,165 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:14:30,166 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:14:30,166 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:14:30,166 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:14:30,167 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:14:30,167 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:14:30,167 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:14:30,169 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 15:14:30,169 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-27 15:14:32,229 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 15:14:32,510 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-27 15:14:32,810 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:14:32,811 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:14:32,811 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:14:32,811 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:14:32,812 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:14:32,812 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:14:32,812 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:14:32,813 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:14:32,813 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:14:32,814 - INFO - user.py:253 - Deleting all certificates for user someuser.
2025-11-27 15:14:32,814 - DEBUG - user.py:255 - Certificates to delete for user someuser
2025-11-27 15:14:32,814 - INFO - ssh.py:140 - Deleting SSH key for user someuser
2025-11-27 15:14:32,814 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:14:32,815 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:14:32,815 - INFO - ssh.py:165 -  < Successfully removed SSH key for user someuser.
2025-11-27 15:14:32,816 - INFO - user.py:260 - Removing sshd configuration for user someuser.
2025-11-27 15:14:32,816 - INFO - ssh.py:116 - Removing sshd config for user someuser
2025-11-27 15:14:32,816 - INFO - ssh.py:119 -  - Found sshd config for user someuser at /etc/ssh/sshd_config.d/sftp-someuser.conf. Deleting it.
2025-11-27 15:14:32,817 - INFO - ssh.py:122 -  < Successfully removed sshd config for user someuser and restarted sshd.
2025-11-27 15:14:32,817 - INFO - user.py:264 - Removing user someuser from all SFTP groups.
2025-11-27 15:14:32,874 - INFO - user.py:268 - Deleting user someuser from system.
2025-11-27 15:14:32,874 - INFO - user.py:271 - Setting ownership and permissions for home directory /home_sftp_users/someuser of user someuser before deletion.
2025-11-27 15:14:32,874 - INFO - user.py:282 - Deleting user someuser and its home directory /home_sftp_users/someuser.
2025-11-27 15:14:32,942 - INFO - user.py:293 - Ensuring home directory /home_sftp_users/someuser of user someuser is removed.
2025-11-27 15:14:32,943 - INFO - ssh.py:280 - Restarting sshd service
2025-11-27 15:14:32,968 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-27 15:14:33,032 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 15:15:25,003 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 15:15:25,018 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:15:25,018 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 15:15:25,019 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 15:15:25,023 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:15:25,024 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:15:25,029 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:15:25,030 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:15:25,046 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 15:15:25,047 - INFO - sftp.py:28 - Installing SFTP users from file: res/testuser.json
2025-11-27 15:15:25,047 - INFO - parser.py:52 - Loading SFTP users from JSON file res/testuser.json.
2025-11-27 15:15:25,047 - INFO - parser.py:56 - Reading JSON file res/testuser.json.
2025-11-27 15:15:25,048 - INFO - parser.py:65 - Parsing SFTP user data from JSON file res/testuser.json.
2025-11-27 15:15:25,048 - INFO - parser.py:69 -  - Found 'users' array in JSON file res/testuser.json.
2025-11-27 15:15:25,048 - INFO - parser.py:76 - Creating 1 SFTP users from JSON file res/testuser.json.
2025-11-27 15:15:25,049 - INFO - parser.py:79 - Processing user data: someuser
2025-11-27 15:15:25,116 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:15:25,116 - INFO - ssh.py:245 -  - Jail directory /home_sftp_users/someuser/__sftp__ does not exist for user someuser. Creating it.
2025-11-27 15:15:25,116 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:15:25,117 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:15:25,117 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:15:25,118 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:15:25,118 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:15:25,118 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:15:25,119 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:15:25,119 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:15:25,119 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:15:25,119 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:15:25,120 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:15:25,120 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:15:25,120 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:15:25,120 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:15:25,121 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:15:25,121 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:15:25,122 - INFO - parser.py:98 - Adding mountpoints for user someuser.
2025-11-27 15:15:25,122 - INFO - parser.py:100 -  - Found 2 mountpoints to add for user someuser.
2025-11-27 15:15:25,122 - INFO - parser.py:102 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-27 15:15:25,123 - INFO - parser.py:113 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-27 15:15:25,123 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:15:25,124 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:15:25,124 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:15:25,124 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:15:25,125 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:15:25,125 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:15:25,125 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:15:25,126 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:15:25,126 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:15:25,127 - INFO - mountPoint.py:163 - Creating mountpoint /home_sftp_users/someuser/__sftp__/img for user someuser.
2025-11-27 15:15:25,127 - INFO - mountPoint.py:135 - Setting ownership and permissions for mountpoint path /home_sftp_users/someuser/__sftp__/img.
2025-11-27 15:15:25,129 - INFO - parser.py:102 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-27 15:15:25,130 - INFO - parser.py:113 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-27 15:15:25,130 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:15:25,130 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:15:25,131 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:15:25,131 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:15:25,131 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:15:25,131 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-27 15:15:25,132 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:15:25,132 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:15:25,133 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:15:25,133 - INFO - mountPoint.py:163 - Creating mountpoint /home_sftp_users/someuser/__sftp__/opis for user someuser.
2025-11-27 15:15:25,133 - INFO - mountPoint.py:135 - Setting ownership and permissions for mountpoint path /home_sftp_users/someuser/__sftp__/opis.
2025-11-27 15:15:25,137 - INFO - parser.py:119 - Adding certificates for user someuser.
2025-11-27 15:15:25,137 - INFO - parser.py:121 -  - Found 1 certificates to add for user someuser.
2025-11-27 15:15:25,137 - INFO - parser.py:123 -    - Processing certificate for user someuser.
2025-11-27 15:15:25,138 - INFO - parser.py:129 -    - Decoding base64 certificate for user someuser.
2025-11-27 15:15:25,138 - INFO - parser.py:134 -    - Successfully decoded base64 certificate for user someuser.
2025-11-27 15:15:25,138 - INFO - parser.py:139 -    - Ensuring SSH key for user someuser.
2025-11-27 15:15:25,138 - INFO - parser.py:143 -    - Adding certificate for user someuser.
2025-11-27 15:15:25,139 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-27 15:15:25,139 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:15:25,139 - INFO - ssh.py:58 -  < Successfully ensured .ssh directory for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:15:25,140 - INFO - ssh.py:200 -  - No existing authorized_keys file for user someuser. It will be created.
2025-11-27 15:15:25,140 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-27 15:15:25,140 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-27 15:15:25,141 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-27 15:15:25,141 - INFO - parser.py:149 -    - Ensuring SSH config for user {username}.
2025-11-27 15:15:25,141 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:15:25,142 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:15:25,142 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:15:25,142 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:15:25,142 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:15:25,143 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:15:25,143 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:15:25,143 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:15:25,144 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:15:25,144 - INFO - parser.py:156 -    - Ensuring mountpoint user groups for user someuser.
2025-11-27 15:15:25,212 - INFO - parser.py:165 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-27 15:15:25,212 - INFO - parser.py:171 - Finished processing JSON file res/testuser.json. Created/updated 1 users.
2025-11-27 15:15:25,212 - INFO - ssh.py:280 - Restarting sshd service
2025-11-27 15:15:25,241 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-27 15:15:25,302 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-27 15:16:11,253 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-27 15:16:11,268 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:16:11,268 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-27 15:16:11,269 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-27 15:16:11,274 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:16:11,274 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:16:11,280 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-27 15:16:11,280 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-27 15:16:11,296 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-27 15:16:11,298 - INFO - sftp.py:31 - Uninstalling SFTP user: None
2025-11-27 15:16:11,300 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:16:11,300 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:16:11,300 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:16:11,301 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:16:11,301 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:16:11,301 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:16:11,302 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:16:11,302 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:16:11,303 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:16:11,305 - DEBUG - sftp.py:33 - Checking user someuser for uninstall
2025-11-27 15:16:11,305 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-27 15:16:13,364 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-27 15:16:13,662 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-27 15:16:13,954 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-27 15:16:13,954 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-27 15:16:13,954 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-27 15:16:13,955 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-27 15:16:13,955 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:16:13,955 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:16:13,955 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-27 15:16:13,956 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-27 15:16:13,956 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-27 15:16:13,957 - INFO - user.py:253 - Deleting all certificates for user someuser.
2025-11-27 15:16:13,957 - DEBUG - user.py:255 - Certificates to delete for user someuser
2025-11-27 15:16:13,957 - INFO - ssh.py:140 - Deleting SSH key for user someuser
2025-11-27 15:16:13,957 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-27 15:16:13,958 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-27 15:16:13,958 - INFO - ssh.py:165 -  < Successfully removed SSH key for user someuser.
2025-11-27 15:16:13,959 - INFO - user.py:260 - Removing sshd configuration for user someuser.
2025-11-27 15:16:13,959 - INFO - ssh.py:116 - Removing sshd config for user someuser
2025-11-27 15:16:13,959 - INFO - ssh.py:119 -  - Found sshd config for user someuser at /etc/ssh/sshd_config.d/sftp-someuser.conf. Deleting it.
2025-11-27 15:16:13,960 - INFO - ssh.py:122 -  < Successfully removed sshd config for user someuser and restarted sshd.
2025-11-27 15:16:13,960 - INFO - user.py:264 - Removing user someuser from all SFTP groups.
2025-11-27 15:16:14,012 - INFO - user.py:268 - Deleting user someuser from system.
2025-11-27 15:16:14,012 - INFO - user.py:271 - Setting ownership and permissions for home directory /home_sftp_users/someuser of user someuser before deletion.
2025-11-27 15:16:14,012 - INFO - user.py:282 - Deleting user someuser and its home directory /home_sftp_users/someuser.
2025-11-27 15:16:14,081 - INFO - user.py:293 - Ensuring home directory /home_sftp_users/someuser of user someuser is removed.
2025-11-27 15:16:14,081 - INFO - ssh.py:280 - Restarting sshd service
2025-11-27 15:16:14,107 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-27 15:16:14,172 - INFO - sftp.py:45 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 09:49:14,842 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-28 09:49:14,870 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:49:14,870 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-28 09:49:14,871 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-28 09:49:14,881 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:49:14,882 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-28 09:49:14,890 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:49:14,890 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-28 09:49:14,938 - INFO - sftp.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:50:26,940 - INFO - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-28 09:50:26,956 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:50:26,956 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-28 09:50:26,957 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-28 09:50:26,964 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:50:26,965 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-28 09:50:26,972 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:50:26,972 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-28 09:50:26,989 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:51:13,757 - DEBUG - helper.py:124 - Logging initialized to file '/root/vyvoj/python/diskBackup/log/app.log', max size: 1000000, backup count: 3.
2025-11-28 09:51:13,771 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:51:13,771 - DEBUG - helper.py:364 - -- Loading default language file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/default.py'.
2025-11-28 09:51:13,772 - DEBUG - helper.py:369 - -- Updating language from file '/root/vyvoj/python/diskBackup/libs/JBLibs/lng/cs-CZ.py'.
2025-11-28 09:51:13,779 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:51:13,779 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-28 09:51:13,786 - DEBUG - helper.py:342 - Loading language file for '/root/vyvoj/python/diskBackup/libs/JBLibs'.
2025-11-28 09:51:13,786 - DEBUG - helper.py:352 - -- HitCache for cs-CZ
2025-11-28 09:51:13,802 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:52:55,206 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:57:52,428 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:57:57,844 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:57:57,845 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 09:57:57,873 - INFO - sftpmng.py:62 - No SFTP users found.
2025-11-28 09:57:57,874 - INFO - sftpmng.py:72 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 09:58:26,958 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:58:26,959 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 09:58:26,971 - INFO - sftpmng.py:72 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 09:59:44,917 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 09:59:44,919 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 09:59:44,927 - INFO - sftpmng.py:74 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 10:00:09,584 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:00:09,585 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 10:00:09,596 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 10:00:36,000 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:00:36,005 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 10:00:36,006 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:00:36,006 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:00:36,072 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:00:36,072 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:00:36,073 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:00:36,073 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 10:00:36,189 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:00:36,190 - INFO - ssh.py:245 -  - Jail directory /home_sftp_users/someuser/__sftp__ does not exist for user someuser. Creating it.
2025-11-28 10:00:36,190 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:00:36,191 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:00:36,192 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:00:36,192 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:00:36,192 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:00:36,193 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:00:36,194 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:00:36,194 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:00:36,194 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:00:36,195 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:00:36,195 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:00:36,195 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:00:36,195 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:00:36,195 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:00:36,196 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:00:36,196 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:00:36,197 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 10:00:36,197 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 10:00:36,197 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 10:00:36,198 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 10:00:36,199 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 10:00:36,199 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:00:36,199 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:00:36,200 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:00:36,200 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:00:36,200 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:00:36,200 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:00:36,201 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:00:36,202 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:00:36,202 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:01:21,356 - ERROR - sambaPoint.py:603 - Failed to ensure Samba SFTP mount point: Mount point paths are not OK.
2025-11-28 10:01:21,854 - ERROR - sambaPoint.py:604 - Mount point paths are not OK.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 554, in ensureMountpoint
    raise RuntimeError("Mount point paths are not OK.")
RuntimeError: Mount point paths are not OK.
2025-11-28 10:01:22,344 - ERROR - parser.py:182 - Failed to create user from JSON data: Failed to create Samba mountpoint img for user someuser: cannot access local variable 'base_share_name' where it is not associated with a value
2025-11-28 10:01:22,344 - ERROR - parser.py:183 - Failed to create Samba mountpoint img for user someuser: cannot access local variable 'base_share_name' where it is not associated with a value
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 554, in ensureMountpoint
    raise RuntimeError("Mount point paths are not OK.")
RuntimeError: Mount point paths are not OK.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 191, in __ensure_x_mountpoint
    smb.ensureMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 605, in ensureMountpoint
    log.info(f" - Cleaning up Samba SFTP mount point for share {base_share_name} due to error.")
                                                                ^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'base_share_name' where it is not associated with a value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 126, in createUserFromJson
    u.mountpointManager.ensure_samba_mountpoint(mount_name, real_path)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 144, in ensure_samba_mountpoint
    self.__ensure_x_mountpoint(mount_name, real_path, samabVault=True)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 193, in __ensure_x_mountpoint
    raise RuntimeError(f"Failed to create Samba mountpoint {mount_name} for user {self.username}: {e}")
RuntimeError: Failed to create Samba mountpoint img for user someuser: cannot access local variable 'base_share_name' where it is not associated with a value
2025-11-28 10:01:22,346 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 0 users.
2025-11-28 10:01:22,347 - ERROR - parser.py:188 - No users were created or updated from JSON data.
2025-11-28 10:01:22,347 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 10:01:22,561 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 10:01:22,679 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 10:02:34,942 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:02:34,943 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 10:02:34,945 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:02:34,945 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:02:34,946 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:02:34,946 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:02:34,946 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:02:34,946 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:02:34,947 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:02:34,947 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:02:34,947 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:03:20,560 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:03:20,561 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 10:03:20,563 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:03:20,563 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:03:20,563 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:03:20,564 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:03:20,564 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:03:20,564 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:03:20,565 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:03:20,565 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:03:20,565 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:03:37,815 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:03:37,816 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 10:03:37,819 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:03:37,819 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:03:37,819 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:03:37,820 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:03:37,820 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:03:37,820 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:03:37,820 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:03:37,821 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:03:37,821 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:03:37,822 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 10:03:50,710 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:03:50,712 - ERROR - sftpmng.py:36 - Either --all or --user must be specified for uninstall.
2025-11-28 10:03:54,887 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:03:54,888 - INFO - sftpmng.py:40 - Uninstalling all SFTP users.
2025-11-28 10:03:54,890 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:03:54,890 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:03:54,890 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:03:54,891 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:03:54,891 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:03:54,891 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:03:54,891 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:03:54,892 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:03:54,893 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:03:54,893 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-28 10:03:56,968 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-28 10:03:56,968 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-28 10:03:56,969 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:03:56,969 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:03:56,969 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:03:56,970 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:03:56,970 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:03:56,970 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:03:56,971 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:03:56,971 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:03:56,971 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:03:56,972 - INFO - user.py:253 - Deleting all certificates for user someuser.
2025-11-28 10:03:56,972 - INFO - user.py:260 - Removing sshd configuration for user someuser.
2025-11-28 10:03:56,972 - INFO - ssh.py:116 - Removing sshd config for user someuser
2025-11-28 10:03:56,972 - INFO - ssh.py:119 -  - Found sshd config for user someuser at /etc/ssh/sshd_config.d/sftp-someuser.conf. Deleting it.
2025-11-28 10:03:56,973 - INFO - ssh.py:122 -  < Successfully removed sshd config for user someuser and restarted sshd.
2025-11-28 10:03:56,973 - INFO - user.py:264 - Removing user someuser from all SFTP groups.
2025-11-28 10:03:56,976 - INFO - user.py:268 - Deleting user someuser from system.
2025-11-28 10:03:56,977 - INFO - user.py:271 - Setting ownership and permissions for home directory /home_sftp_users/someuser of user someuser before deletion.
2025-11-28 10:03:56,977 - INFO - user.py:282 - Deleting user someuser and its home directory /home_sftp_users/someuser.
2025-11-28 10:03:57,053 - INFO - user.py:293 - Ensuring home directory /home_sftp_users/someuser of user someuser is removed.
2025-11-28 10:03:57,054 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 10:03:57,078 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 10:03:57,145 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 10:04:00,047 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:04:00,048 - INFO - sftpmng.py:59 - Listing all SFTP users:
2025-11-28 10:04:00,050 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 10:07:27,091 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 10:07:27,095 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 10:07:27,095 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:07:27,096 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:07:27,165 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:07:27,166 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:07:27,166 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 10:07:27,167 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 10:07:27,243 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:07:27,243 - INFO - ssh.py:245 -  - Jail directory /home_sftp_users/someuser/__sftp__ does not exist for user someuser. Creating it.
2025-11-28 10:07:27,244 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:07:27,244 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:07:27,244 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:07:27,245 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:07:27,245 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:07:27,245 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:07:27,246 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:07:27,246 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:07:27,246 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:07:27,247 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:07:27,247 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:07:27,247 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:07:27,247 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:07:27,248 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:07:27,248 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:07:27,249 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:07:27,249 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 10:07:27,249 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 10:07:27,250 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 10:07:27,252 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 10:07:27,253 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 10:07:27,254 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 10:07:27,254 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 10:07:27,254 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 10:07:27,254 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 10:07:27,255 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 10:07:27,255 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 10:07:27,255 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 10:07:27,256 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 10:07:27,256 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 10:07:31,835 - INFO - sambaPoint.py:568 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 10:07:33,195 - INFO - sambaPoint.py:150 - Samba SFTP user sftp_samba_user does not exist. Creating it.
2025-11-28 10:07:33,261 - INFO - sambaPoint.py:128 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 10:07:33,455 - INFO - sambaPoint.py:163 - Samba SFTP user sftp_samba_user created successfully.
2025-11-28 10:07:33,456 - INFO - sambaPoint.py:68 - Creating Samba config directory /etc/samba/smb_sftp_conf.d.
2025-11-28 10:07:33,457 - INFO - sambaPoint.py:96 - Adding Samba config loader include line to /etc/samba/smb.conf.
2025-11-28 10:07:33,458 - INFO - sambaPoint.py:111 - Writing Samba config loader include line at end of /etc/samba/smb.conf.
2025-11-28 10:08:02,829 - INFO - sambaPoint.py:577 - Creating mount point directory: /home_sftp_users/someuser/__sftp__/img
2025-11-28 10:08:32,424 - INFO - sambaPoint.py:591 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 10:09:17,376 - INFO - sambaPoint.py:206 - Adding Samba mount point config /etc/samba/smb_sftp_conf.d/sftp_mount_root_img.conf.
2025-11-28 10:09:18,660 - INFO - sambaPoint.py:207 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 10:09:19,535 - INFO - sambaPoint.py:208 -  - dest: sftp_mount_root_img
2025-11-28 10:09:20,064 - INFO - sambaPoint.py:209 -  - force user: root
2025-11-28 10:09:20,614 - INFO - sambaPoint.py:210 -  - force group: vboxsf
2025-11-28 10:10:26,798 - INFO - sambaPoint.py:440 - Restarting Samba service
2025-11-28 10:10:26,834 - INFO - sambaPoint.py:447 -  - Stopping Samba - smbd service before restart.
2025-11-28 10:10:27,027 - INFO - sambaPoint.py:460 - < Samba service restarted successfully.
2025-11-28 10:10:34,458 - INFO - sambaPoint.py:599 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 10:11:21,102 - INFO - sambaPoint.py:262 - Ensuring CIFS mount line in /etc/fstab.d/sftp_mount_root_img.fstab.
2025-11-28 10:12:06,599 - INFO - sambaPoint.py:606 -  - Ensuring Samba SFTP mount point img is mounted.
2025-11-28 10:12:17,055 - INFO - sambaPoint.py:614 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_root_img.
2025-11-28 11:21:04,331 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:21:04,339 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:21:04,340 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:21:04,340 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:21:04,407 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:21:04,407 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:21:04,407 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:21:04,407 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:21:04,408 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:21:04,409 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:21:04,409 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:21:04,410 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:21:04,410 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:21:04,411 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:21:04,411 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:21:04,411 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:21:04,412 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:21:04,412 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:21:04,412 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:21:04,412 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:21:04,412 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:21:04,414 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:21:04,415 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:21:04,415 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:21:04,415 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:21:04,416 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:21:04,416 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:21:04,416 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:21:04,417 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:21:04,417 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:21:04,417 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:21:04,418 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:21:24,811 - INFO - sambaPoint.py:539 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:21:25,796 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:21:25,796 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:22:09,671 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:22:09,677 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:22:09,678 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:22:09,678 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:22:09,746 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:22:09,746 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:22:09,746 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:22:09,747 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:22:09,748 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:22:09,748 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:22:09,748 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:22:09,749 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:22:09,749 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:22:09,750 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:22:09,750 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:22:09,750 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:22:09,750 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:22:09,751 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:22:09,751 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:22:09,751 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:22:09,752 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:22:09,753 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:22:09,753 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:22:09,753 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:22:09,754 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:22:09,754 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:22:09,754 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:22:09,754 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:22:09,755 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:22:09,755 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:22:09,755 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:22:09,755 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:22:37,333 - INFO - sambaPoint.py:539 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:22:47,450 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:22:52,681 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:23:45,100 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:23:45,106 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:23:45,106 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:23:45,107 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:23:45,174 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:23:45,175 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:23:45,175 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:23:45,175 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:23:45,176 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:23:45,176 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:23:45,177 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:23:45,177 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:23:45,177 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:23:45,178 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:23:45,178 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:23:45,179 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:23:45,180 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:23:45,180 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:23:45,180 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:23:45,180 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:23:45,180 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:23:45,182 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:23:45,183 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:23:45,183 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:23:45,183 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:23:45,184 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:23:45,184 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:23:45,184 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:23:45,185 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:23:45,185 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:23:45,186 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:23:45,187 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:23:48,905 - INFO - sambaPoint.py:538 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:23:49,326 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:23:49,327 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:24:01,284 - INFO - sambaPoint.py:561 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:24:52,548 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:24:52,914 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:24:53,286 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:24:53,666 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:26:52,064 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:26:52,069 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:26:52,070 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:26:52,070 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:26:52,139 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:26:52,140 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:26:52,140 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:26:52,140 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:26:52,141 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:26:52,141 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:26:52,142 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:26:52,142 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:26:52,142 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:26:52,143 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:26:52,143 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:26:52,143 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:26:52,144 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:26:52,144 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:26:52,145 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:26:52,146 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:26:52,146 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:26:52,147 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:26:52,148 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:26:52,148 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:26:52,148 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:26:52,149 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:26:52,149 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:26:52,149 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:26:52,149 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:26:52,150 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:26:52,150 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:26:52,150 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:26:56,821 - INFO - sambaPoint.py:538 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:26:57,306 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:26:57,306 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:27:04,794 - INFO - sambaPoint.py:561 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:27:14,715 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:27:15,083 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:27:16,736 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:27:17,955 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:28:12,149 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:28:12,154 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:28:12,154 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:12,154 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:12,222 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:12,222 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:12,222 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:12,223 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:28:12,223 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:28:12,224 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:28:12,224 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:28:12,224 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:28:12,225 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:28:12,225 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:28:12,226 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:28:12,226 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:28:12,226 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:28:12,226 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:28:12,227 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:28:12,227 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:28:12,227 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:28:12,228 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:28:12,229 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:28:12,229 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:28:12,230 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:28:12,230 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:28:12,230 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:28:12,231 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:28:12,231 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:28:12,231 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:28:12,231 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:28:12,232 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:28:12,233 - INFO - sambaPoint.py:538 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:28:12,234 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:28:12,234 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:28:12,273 - INFO - sambaPoint.py:561 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:28:12,274 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:28:12,274 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:28:12,275 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:28:12,275 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:28:59,546 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:28:59,552 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:28:59,552 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:59,552 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:59,615 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:59,615 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:59,615 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:28:59,616 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:28:59,616 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:28:59,617 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:28:59,617 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:28:59,617 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:28:59,618 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:28:59,618 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:28:59,618 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:28:59,619 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:28:59,619 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:28:59,619 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:28:59,620 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:28:59,620 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:28:59,620 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:28:59,621 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:28:59,622 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:28:59,622 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:28:59,622 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:28:59,623 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:28:59,623 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:28:59,623 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:28:59,624 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:28:59,624 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:28:59,624 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:28:59,625 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:28:59,625 - INFO - sambaPoint.py:538 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:28:59,626 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:28:59,626 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:28:59,660 - INFO - sambaPoint.py:561 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:28:59,661 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:28:59,661 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:28:59,661 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:28:59,661 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:29:21,466 - INFO - sambaPoint.py:427 - Restarting Samba service
2025-11-28 11:29:21,499 - INFO - sambaPoint.py:434 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:29:21,617 - INFO - sambaPoint.py:447 - < Samba service restarted successfully.
2025-11-28 11:29:22,389 - INFO - sambaPoint.py:569 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 11:29:22,828 - INFO - sambaPoint.py:250 - Ensuring CIFS mount line in /etc/fstab.d/sftp_mount_root_img.fstab.
2025-11-28 11:31:02,240 - INFO - sambaPoint.py:576 -  - Ensuring Samba SFTP mount point img is mounted.
2025-11-28 11:31:11,043 - INFO - sambaPoint.py:584 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_root_img.
2025-11-28 11:31:29,383 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:31:29,392 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:31:29,393 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:29,393 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:29,468 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:29,468 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:29,468 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:29,469 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:31:29,470 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:31:29,470 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:31:29,471 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:31:29,472 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:31:29,472 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:31:29,473 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:31:29,473 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:31:29,474 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:31:29,474 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:31:29,475 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:31:29,476 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:31:29,476 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:31:29,477 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:31:29,480 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:31:29,480 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:31:29,481 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:31:29,481 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:31:29,481 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:31:29,482 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:31:29,482 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:31:29,482 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:31:29,482 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:31:29,484 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:31:29,484 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:31:29,486 - INFO - sambaPoint.py:538 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:31:29,488 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:31:29,489 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:31:29,531 - INFO - sambaPoint.py:561 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:31:29,532 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:31:29,532 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:31:29,532 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:31:29,533 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:31:29,534 - INFO - sambaPoint.py:427 - Restarting Samba service
2025-11-28 11:31:29,559 - INFO - sambaPoint.py:434 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:31:29,672 - INFO - sambaPoint.py:447 - < Samba service restarted successfully.
2025-11-28 11:31:42,471 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:31:42,476 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:31:42,476 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:42,477 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:42,544 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:42,545 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:42,545 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:31:42,545 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:31:42,546 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:31:42,546 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:31:42,546 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:31:42,547 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:31:42,548 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:31:42,548 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:31:42,549 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:31:42,549 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:31:42,550 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:31:42,550 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:31:42,551 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:31:42,551 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:31:42,552 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:31:42,553 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:31:42,553 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:31:42,554 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:31:42,554 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:31:42,554 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:31:42,555 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:31:42,555 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:31:42,555 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:31:42,555 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:31:42,556 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:31:42,556 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:31:42,557 - INFO - sambaPoint.py:538 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:31:42,557 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:31:42,558 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:31:42,594 - INFO - sambaPoint.py:561 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:31:42,595 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:31:42,595 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:31:42,596 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:31:42,596 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:31:42,597 - INFO - sambaPoint.py:427 - Restarting Samba service
2025-11-28 11:31:42,621 - INFO - sambaPoint.py:434 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:31:42,725 - INFO - sambaPoint.py:447 - < Samba service restarted successfully.
2025-11-28 11:31:50,224 - INFO - sambaPoint.py:569 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 11:31:57,801 - INFO - sambaPoint.py:250 - Ensuring CIFS mount line in /etc/fstab.d/sftp_mount_root_img.fstab.
2025-11-28 11:48:36,210 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:48:36,219 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:48:36,219 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:48:36,220 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:48:36,288 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:48:36,288 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:48:36,289 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:48:36,289 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:48:36,290 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:48:36,290 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:48:36,291 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:48:36,292 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:48:36,293 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:48:36,293 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:48:36,294 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:48:36,295 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:48:36,296 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:48:36,297 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:48:36,297 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:48:36,298 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:48:36,298 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:48:36,299 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:48:36,299 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:48:36,300 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:48:36,300 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:48:36,300 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:48:36,300 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:48:36,300 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:48:36,301 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:48:36,301 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:48:36,302 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:48:36,302 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:48:36,304 - INFO - sambaPoint.py:593 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:48:36,304 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:48:36,304 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:48:36,450 - INFO - sambaPoint.py:616 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:48:36,451 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:48:36,451 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:48:36,452 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:48:36,452 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:48:36,453 - INFO - sambaPoint.py:482 - Restarting Samba service
2025-11-28 11:48:36,511 - INFO - sambaPoint.py:489 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:48:36,738 - INFO - sambaPoint.py:502 - < Samba service restarted successfully.
2025-11-28 11:50:34,939 - INFO - sambaPoint.py:624 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 11:50:39,224 - INFO - sambaPoint.py:270 - Added CIFS mount line to /etc/fstab for share 'img' (user=root).
2025-11-28 11:52:50,421 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:52:50,428 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:52:50,429 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:52:50,429 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:52:50,506 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:52:50,507 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:52:50,507 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:52:50,507 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:52:50,508 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:52:50,509 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:52:50,509 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:52:50,509 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:52:50,510 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:52:50,510 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:52:50,511 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:52:50,511 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:52:50,511 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:52:50,512 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:52:50,512 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:52:50,513 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:52:50,513 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:52:50,515 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:52:50,515 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:52:50,515 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:52:50,515 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:52:50,516 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:52:50,516 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:52:50,517 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:52:50,517 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:52:50,517 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:52:50,518 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:52:50,518 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:52:50,519 - INFO - sambaPoint.py:593 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:52:50,519 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:52:50,520 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:52:50,556 - INFO - sambaPoint.py:616 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:52:50,556 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:52:50,557 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:52:50,557 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:52:50,557 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:52:50,558 - INFO - sambaPoint.py:482 - Restarting Samba service
2025-11-28 11:52:50,583 - INFO - sambaPoint.py:489 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:52:50,690 - INFO - sambaPoint.py:502 - < Samba service restarted successfully.
2025-11-28 11:52:57,862 - INFO - sambaPoint.py:624 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 11:52:59,314 - INFO - sambaPoint.py:308 - Removing CIFS fstab entry for img (root).
2025-11-28 11:52:59,316 - INFO - sambaPoint.py:270 - Added CIFS mount line to /etc/fstab for share 'img' (user=root).
2025-11-28 11:53:33,877 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:53:33,882 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:53:33,883 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:53:33,883 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:53:33,958 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:53:33,959 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:53:33,959 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:53:33,959 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:53:33,960 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:53:33,960 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:53:33,961 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:53:33,961 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:53:33,962 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:53:33,963 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:53:33,963 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:53:33,964 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:53:33,964 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:53:33,964 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:53:33,965 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:53:33,965 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:53:33,965 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:53:33,966 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:53:33,967 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:53:33,968 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:53:33,968 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:53:33,968 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:53:33,969 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:53:33,969 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:53:33,969 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:53:33,970 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:53:33,970 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:53:33,970 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:53:33,971 - INFO - sambaPoint.py:593 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:53:33,972 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:53:33,972 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:53:34,006 - INFO - sambaPoint.py:616 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:53:34,007 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:53:34,007 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:53:34,007 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:53:34,008 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:53:34,008 - INFO - sambaPoint.py:482 - Restarting Samba service
2025-11-28 11:53:34,033 - INFO - sambaPoint.py:489 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:53:34,138 - INFO - sambaPoint.py:502 - < Samba service restarted successfully.
2025-11-28 11:53:36,719 - INFO - sambaPoint.py:624 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 11:53:38,883 - INFO - sambaPoint.py:308 - Removing CIFS fstab entry for img (root).
2025-11-28 11:53:38,884 - INFO - sambaPoint.py:270 - Added CIFS mount line to /etc/fstab for share 'img' (user=root).
2025-11-28 11:54:09,314 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:54:09,319 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:54:09,319 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:54:09,320 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:54:09,379 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:54:09,380 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:54:09,381 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:54:09,381 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:54:09,382 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:54:09,383 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:54:09,383 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:54:09,384 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:54:09,384 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:54:09,384 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:54:09,385 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:54:09,385 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:54:09,385 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:54:09,386 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:54:09,386 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:54:09,387 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:54:09,387 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:54:09,388 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:54:09,388 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:54:09,388 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:54:09,389 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:54:09,389 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:54:09,389 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:54:09,390 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:54:09,390 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:54:09,390 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:54:09,391 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:54:09,391 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:54:09,392 - INFO - sambaPoint.py:593 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 11:54:09,392 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 11:54:09,393 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 11:54:09,426 - INFO - sambaPoint.py:616 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 11:54:09,426 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_root_img]:
2025-11-28 11:54:09,426 - INFO - sambaPoint.py:191 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 11:54:09,427 - INFO - sambaPoint.py:192 -  - force user: root
2025-11-28 11:54:09,427 - INFO - sambaPoint.py:193 -  - force group: vboxsf
2025-11-28 11:54:09,428 - INFO - sambaPoint.py:482 - Restarting Samba service
2025-11-28 11:54:09,450 - INFO - sambaPoint.py:489 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:54:09,568 - INFO - sambaPoint.py:502 - < Samba service restarted successfully.
2025-11-28 11:54:11,550 - INFO - sambaPoint.py:624 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 11:54:12,143 - INFO - sambaPoint.py:308 - Removing CIFS fstab entry for img (root).
2025-11-28 11:54:12,146 - INFO - sambaPoint.py:270 - Added CIFS mount line to /etc/fstab for share 'img' (user=root).
2025-11-28 11:54:30,358 - INFO - sambaPoint.py:227 - Restarting systemd daemon.
2025-11-28 11:54:30,724 - INFO - sambaPoint.py:235 - Systemd daemon restarted successfully.
2025-11-28 11:54:35,418 - INFO - sambaPoint.py:632 -  - Ensuring Samba SFTP mount point img is mounted.
2025-11-28 11:54:40,957 - INFO - sambaPoint.py:640 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_root_img.
2025-11-28 11:55:11,062 - INFO - sambaPoint.py:664 - < Samba SFTP mount point //127.0.0.1/sftp_mount_root_img mounted successfully.
2025-11-28 11:55:26,533 - INFO - parser.py:112 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-28 11:55:29,211 - INFO - parser.py:123 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-28 11:55:30,478 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:55:31,789 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:55:31,790 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:55:31,791 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:55:31,791 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:55:31,791 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:55:31,792 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:55:31,793 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:55:31,793 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:55:31,794 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:55:31,795 - INFO - sambaPoint.py:593 - Ensuring Samba SFTP mount point configuration for share opis.
2025-11-28 11:55:31,795 - INFO - sambaPoint.py:602 - Creating mount point directory: /home_sftp_users/someuser/__sftp__/opis
2025-11-28 11:55:31,796 - INFO - sambaPoint.py:616 -  - Ensuring Samba SFTP mount point for share opis at target /home/dvestezar/pro_opis.
2025-11-28 11:55:31,797 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_someuser_opis]:
2025-11-28 11:55:31,797 - INFO - sambaPoint.py:191 -  - target: /home/dvestezar/pro_opis
2025-11-28 11:55:31,798 - INFO - sambaPoint.py:192 -  - force user: someuser
2025-11-28 11:55:31,798 - INFO - sambaPoint.py:193 -  - force group: dvestezar
2025-11-28 11:55:31,799 - INFO - sambaPoint.py:482 - Restarting Samba service
2025-11-28 11:55:31,824 - INFO - sambaPoint.py:489 -  - Stopping Samba - smbd service before restart.
2025-11-28 11:55:31,950 - INFO - sambaPoint.py:502 - < Samba service restarted successfully.
2025-11-28 11:57:46,868 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:57:46,873 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:57:46,873 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:57:46,874 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:57:46,942 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:57:46,943 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:57:46,943 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:57:46,943 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:57:46,943 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:57:46,944 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:57:46,944 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:57:46,945 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:57:46,945 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:57:46,945 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:57:46,945 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:57:46,946 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:57:46,946 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:57:46,946 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:57:46,948 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:57:46,948 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:57:46,948 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:57:46,948 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:57:46,949 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:57:46,951 - ERROR - parser.py:182 - Failed to create user from JSON data: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 11:57:46,952 - ERROR - parser.py:183 - Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 94, in deleteOneMountpoint
    os.rmdir(mp_to_delete.mountPath)
OSError: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 126, in createUserFromJson
    u.mountpointManager.ensure_samba_mountpoint(mount_name, real_path)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 144, in ensure_samba_mountpoint
    self.__ensure_x_mountpoint(mount_name, real_path, samabVault=True)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 182, in __ensure_x_mountpoint
    self.deleteOneMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 99, in deleteOneMountpoint
    raise RuntimeError(f"Failed to delete mountpoint {mount_point.mountName} for user {self.username}: {e}")
RuntimeError: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 11:57:46,956 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 0 users.
2025-11-28 11:57:46,956 - ERROR - parser.py:188 - No users were created or updated from JSON data.
2025-11-28 11:57:46,957 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 11:57:46,994 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 11:57:47,111 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 11:58:01,010 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 11:58:01,016 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 11:58:01,017 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:58:01,017 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:58:01,076 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:58:01,077 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:58:01,077 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 11:58:01,077 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 11:58:01,078 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 11:58:01,078 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 11:58:01,079 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 11:58:01,079 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 11:58:01,080 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 11:58:01,080 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 11:58:01,081 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 11:58:01,083 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 11:58:01,084 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 11:58:01,085 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 11:58:01,087 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 11:58:01,087 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 11:58:01,087 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 11:58:01,087 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 11:58:01,088 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 11:58:01,089 - ERROR - parser.py:182 - Failed to create user from JSON data: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 11:58:01,090 - ERROR - parser.py:183 - Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 94, in deleteOneMountpoint
    os.rmdir(mp_to_delete.mountPath)
OSError: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 126, in createUserFromJson
    u.mountpointManager.ensure_samba_mountpoint(mount_name, real_path)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 144, in ensure_samba_mountpoint
    self.__ensure_x_mountpoint(mount_name, real_path, samabVault=True)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 182, in __ensure_x_mountpoint
    self.deleteOneMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 99, in deleteOneMountpoint
    raise RuntimeError(f"Failed to delete mountpoint {mount_point.mountName} for user {self.username}: {e}")
RuntimeError: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 11:58:01,092 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 0 users.
2025-11-28 11:58:01,092 - ERROR - parser.py:188 - No users were created or updated from JSON data.
2025-11-28 11:58:01,093 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 11:58:01,122 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 11:58:01,194 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 12:01:27,088 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:01:27,093 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:01:27,094 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:01:27,094 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:01:27,163 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:01:27,163 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:01:27,164 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:01:27,164 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:01:27,164 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:01:27,165 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:01:27,165 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:01:27,166 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:01:27,166 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:01:27,166 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:01:27,166 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:01:27,167 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:01:27,168 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:01:27,168 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:01:27,170 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:01:27,170 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:01:27,170 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:01:27,171 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:01:27,171 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:01:27,172 - ERROR - parser.py:182 - Failed to create user from JSON data: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 12:01:27,173 - ERROR - parser.py:183 - Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 94, in deleteOneMountpoint
    os.rmdir(mp_to_delete.mountPath)
OSError: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 126, in createUserFromJson
    u.mountpointManager.ensure_samba_mountpoint(mount_name, real_path)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 144, in ensure_samba_mountpoint
    self.__ensure_x_mountpoint(mount_name, real_path, samabVault=True)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 182, in __ensure_x_mountpoint
    self.deleteOneMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 99, in deleteOneMountpoint
    raise RuntimeError(f"Failed to delete mountpoint {mount_point.mountName} for user {self.username}: {e}")
RuntimeError: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 12:01:27,175 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 0 users.
2025-11-28 12:01:27,175 - ERROR - parser.py:188 - No users were created or updated from JSON data.
2025-11-28 12:01:27,176 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 12:01:27,204 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 12:01:27,260 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 12:04:02,195 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:04:02,200 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:04:02,200 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:02,200 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:02,273 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:02,273 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:02,274 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:02,274 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:04:02,275 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:04:02,276 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:04:02,276 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:04:02,276 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:04:02,277 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:04:02,278 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:04:02,278 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:04:02,278 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:04:02,279 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:04:02,279 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:04:02,281 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:04:02,281 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:04:02,281 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:04:02,282 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:04:02,282 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:04:54,686 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:04:54,691 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:04:54,691 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:54,692 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:54,756 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:54,756 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:54,757 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:04:54,759 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:04:54,759 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:04:54,760 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:04:54,760 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:04:54,761 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:04:54,762 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:04:54,762 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:04:54,762 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:04:54,762 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:04:54,763 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:04:54,763 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:04:54,765 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:04:54,765 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:04:54,766 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:04:54,766 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:04:54,766 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:04:57,468 - ERROR - parser.py:182 - Failed to create user from JSON data: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 12:04:57,469 - ERROR - parser.py:183 - Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 94, in deleteOneMountpoint
    os.rmdir(mp_to_delete.mountPath)
OSError: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 126, in createUserFromJson
    u.mountpointManager.ensure_samba_mountpoint(mount_name, real_path)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 144, in ensure_samba_mountpoint
    self.__ensure_x_mountpoint(mount_name, real_path, samabVault=True)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 182, in __ensure_x_mountpoint
    self.deleteOneMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 99, in deleteOneMountpoint
    raise RuntimeError(f"Failed to delete mountpoint {mount_point.mountName} for user {self.username}: {e}")
RuntimeError: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 12:04:57,472 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 0 users.
2025-11-28 12:04:57,472 - ERROR - parser.py:188 - No users were created or updated from JSON data.
2025-11-28 12:04:57,473 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 12:04:57,503 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 12:04:57,564 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 12:05:03,798 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:05:03,804 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:05:03,805 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:05:03,805 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:05:03,870 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:05:03,870 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:05:03,870 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:05:03,870 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:05:03,871 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:05:03,872 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:05:03,873 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:05:03,873 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:05:03,873 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:05:03,874 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:05:03,874 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:05:03,874 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:05:03,875 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:05:03,875 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:05:03,877 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:05:03,877 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:05:03,877 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:05:03,877 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:05:03,878 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:06:04,057 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:06:04,062 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:06:04,063 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:06:04,063 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:06:04,127 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:06:04,127 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:06:04,127 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:06:04,127 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:06:04,128 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:06:04,128 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:06:04,129 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:06:04,129 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:06:04,129 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:06:04,130 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:06:04,130 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:06:04,130 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:06:04,131 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:06:04,131 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:06:04,132 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:06:04,133 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:06:04,133 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:06:04,133 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:06:04,134 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:07:24,098 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:07:24,103 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:07:24,104 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:24,104 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:24,167 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:24,168 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:24,168 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:24,168 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:07:24,169 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:07:24,170 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:07:24,170 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:07:24,170 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:07:24,171 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:07:24,171 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:07:24,171 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:07:24,172 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:07:24,173 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:07:24,173 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:07:24,175 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:07:24,175 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:07:24,175 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:07:24,176 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:07:24,176 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:07:26,796 - ERROR - parser.py:182 - Failed to create user from JSON data: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 12:07:26,796 - ERROR - parser.py:183 - Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 94, in deleteOneMountpoint
    os.rmdir(mp_to_delete.mountPath)
OSError: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 126, in createUserFromJson
    u.mountpointManager.ensure_samba_mountpoint(mount_name, real_path)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 144, in ensure_samba_mountpoint
    self.__ensure_x_mountpoint(mount_name, real_path, samabVault=True)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 182, in __ensure_x_mountpoint
    self.deleteOneMountpoint(mp)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 99, in deleteOneMountpoint
    raise RuntimeError(f"Failed to delete mountpoint {mount_point.mountName} for user {self.username}: {e}")
RuntimeError: Failed to delete mountpoint img for user someuser: [Errno 16] Device or resource busy: '/home_sftp_users/someuser/__sftp__/img'
2025-11-28 12:07:26,798 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 0 users.
2025-11-28 12:07:26,799 - ERROR - parser.py:188 - No users were created or updated from JSON data.
2025-11-28 12:07:26,799 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 12:07:26,829 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 12:07:26,890 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 12:07:48,169 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:07:48,174 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:07:48,174 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:48,175 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:48,246 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:48,246 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:48,246 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:07:48,246 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:07:48,247 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:07:48,248 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:07:48,248 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:07:48,248 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:07:48,248 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:07:48,249 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:07:48,249 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:07:48,249 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:07:48,250 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:07:48,250 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:07:48,252 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:07:48,252 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:07:48,252 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:07:48,253 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:07:48,253 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:09:28,442 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:09:28,448 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:09:28,449 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:28,449 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:28,514 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:28,514 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:28,515 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:28,515 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:09:28,515 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:09:28,516 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:09:28,516 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:09:28,517 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:09:28,518 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:09:28,518 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:09:28,518 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:09:28,519 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:09:28,519 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:09:28,520 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:09:28,521 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:09:28,522 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:09:28,522 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:09:28,522 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:09:28,522 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:09:43,084 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:09:43,089 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:09:43,090 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:43,090 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:43,146 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:43,146 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:43,147 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:09:43,147 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:09:43,148 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:09:43,149 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:09:43,149 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:09:43,150 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:09:43,150 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:09:43,151 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:09:43,151 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:09:43,151 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:09:43,152 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:09:43,152 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:09:43,157 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:09:43,157 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:09:43,157 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:09:43,157 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:09:43,158 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:10:25,014 - INFO - parser.py:112 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-28 12:10:27,892 - INFO - parser.py:123 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-28 12:10:30,709 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:10:35,014 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:10:35,015 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:10:35,016 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:10:35,016 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:10:35,017 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:10:35,017 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:10:35,017 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:10:35,018 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:10:35,018 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:10:35,019 - INFO - sambaPoint.py:593 - Ensuring Samba SFTP mount point configuration for share opis.
2025-11-28 12:10:38,725 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 12:10:38,726 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 12:10:50,002 - INFO - sambaPoint.py:616 -  - Ensuring Samba SFTP mount point for share opis at target /home/dvestezar/pro_opis.
2025-11-28 12:10:50,709 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_dvestezar_opis]:
2025-11-28 12:10:50,709 - INFO - sambaPoint.py:191 -  - target: /home/dvestezar/pro_opis
2025-11-28 12:10:50,710 - INFO - sambaPoint.py:192 -  - force user: dvestezar
2025-11-28 12:10:50,710 - INFO - sambaPoint.py:193 -  - force group: dvestezar
2025-11-28 12:11:16,569 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:11:16,574 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:11:16,575 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:11:16,575 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:11:16,641 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:11:16,642 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:11:16,642 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:11:16,642 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:11:16,642 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:11:16,643 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:11:16,643 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:11:16,644 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:11:16,644 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:11:16,645 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:11:16,645 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:11:16,645 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:11:16,646 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:11:16,646 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:11:16,647 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:11:16,648 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:11:16,648 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:11:16,648 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:11:16,648 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:11:16,649 - INFO - parser.py:112 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-28 12:11:16,649 - INFO - parser.py:123 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-28 12:11:16,649 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:11:16,649 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:11:16,650 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:11:16,650 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:11:16,650 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:11:16,651 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:11:16,651 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:11:16,651 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:11:16,652 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:11:16,652 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:11:16,652 - INFO - sambaPoint.py:593 - Ensuring Samba SFTP mount point configuration for share opis.
2025-11-28 12:11:16,653 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 12:11:16,653 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 12:11:16,688 - INFO - sambaPoint.py:616 -  - Ensuring Samba SFTP mount point for share opis at target /home/dvestezar/pro_opis.
2025-11-28 12:11:35,692 - INFO - sambaPoint.py:190 - Adding Samba mount point config to section [sftp_mount_dvestezar_opis]:
2025-11-28 12:11:36,021 - INFO - sambaPoint.py:191 -  - target: /home/dvestezar/pro_opis
2025-11-28 12:11:36,426 - INFO - sambaPoint.py:192 -  - force user: dvestezar
2025-11-28 12:11:36,866 - INFO - sambaPoint.py:193 -  - force group: dvestezar
2025-11-28 12:20:40,972 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:20:40,978 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:20:40,979 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:20:40,980 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:20:41,060 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:20:41,060 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:20:41,060 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:20:41,061 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:20:41,061 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:20:41,062 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:20:41,063 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:20:41,064 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:20:41,064 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:20:41,065 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:20:41,065 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:20:41,065 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:20:41,066 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:20:41,067 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:20:41,069 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:20:41,070 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:20:41,070 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:20:41,070 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:20:41,070 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:20:41,075 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:20:41,075 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:20:41,076 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:20:41,076 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:20:41,076 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:20:41,076 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:20:41,076 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:20:41,077 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:20:41,077 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:20:41,077 - ERROR - parser.py:182 - Failed to create user from JSON data: Failed to create Samba mountpoint img for user someuser: ensureMountpoint() missing 1 required positional argument: 'mp'
2025-11-28 12:20:41,078 - ERROR - parser.py:183 - Failed to create Samba mountpoint img for user someuser: ensureMountpoint() missing 1 required positional argument: 'mp'
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 191, in __ensure_x_mountpoint
    smb.ensureMountpoint(mp)
TypeError: ensureMountpoint() missing 1 required positional argument: 'mp'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/parser.py", line 126, in createUserFromJson
    u.mountpointManager.ensure_samba_mountpoint(mount_name, real_path)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 144, in ensure_samba_mountpoint
    self.__ensure_x_mountpoint(mount_name, real_path, sambaVault=True)
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/mounts.py", line 193, in __ensure_x_mountpoint
    raise RuntimeError(f"Failed to create Samba mountpoint {mount_name} for user {self.username}: {e}")
RuntimeError: Failed to create Samba mountpoint img for user someuser: ensureMountpoint() missing 1 required positional argument: 'mp'
2025-11-28 12:20:41,080 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 0 users.
2025-11-28 12:20:41,080 - ERROR - parser.py:188 - No users were created or updated from JSON data.
2025-11-28 12:20:41,081 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 12:20:41,146 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 12:20:41,231 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 12:21:14,240 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:21:14,246 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:21:14,246 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:21:14,247 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:21:14,310 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:21:14,310 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:21:14,310 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:21:14,311 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:21:14,311 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:21:14,312 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:21:14,312 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:21:14,312 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:21:14,313 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:21:14,313 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:21:14,313 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:21:14,314 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:21:14,315 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:21:14,315 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:21:14,315 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:21:14,315 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:21:14,316 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:21:14,317 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:21:14,318 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:21:14,318 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:21:14,319 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:21:14,319 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:21:14,319 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:21:14,320 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:21:14,320 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:21:14,320 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:21:14,321 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:21:14,321 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:21:14,322 - INFO - sambaPoint.py:596 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 12:21:14,323 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 12:21:14,323 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 12:21:14,429 - INFO - sambaPoint.py:605 - Creating mount point directory: /home_sftp_users/someuser/__sftp__/img
2025-11-28 12:21:14,430 - INFO - sambaPoint.py:619 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 12:21:20,108 - INFO - sambaPoint.py:192 - Adding Samba mount point config to section [sftp_mount_someuser_img]:
2025-11-28 12:21:20,108 - INFO - sambaPoint.py:193 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 12:21:20,109 - INFO - sambaPoint.py:194 -  - force user: root
2025-11-28 12:21:20,109 - INFO - sambaPoint.py:195 -  - force group: vboxsf
2025-11-28 12:22:19,996 - INFO - sambaPoint.py:484 - Restarting Samba service
2025-11-28 12:22:20,031 - INFO - sambaPoint.py:491 -  - Stopping Samba - smbd service before restart.
2025-11-28 12:22:20,344 - INFO - sambaPoint.py:504 - < Samba service restarted successfully.
2025-11-28 12:22:22,039 - INFO - sambaPoint.py:627 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 12:26:30,773 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:26:30,778 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:26:30,778 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:26:30,778 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:26:30,844 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:26:30,845 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:26:30,845 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:26:30,846 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:26:30,847 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:26:30,849 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:26:30,849 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:26:30,849 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:26:30,850 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:26:30,850 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:26:30,850 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:26:30,850 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:26:30,851 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:26:30,852 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:26:30,852 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:26:30,852 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:26:30,852 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:26:30,853 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:26:30,853 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:26:30,854 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:26:30,855 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:26:30,855 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:26:30,856 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:26:30,858 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:26:30,858 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:26:30,860 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:26:30,860 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:26:30,861 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:26:30,862 - INFO - sambaPoint.py:597 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 12:26:30,863 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 12:26:30,863 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 12:26:30,916 - INFO - sambaPoint.py:620 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 12:26:43,659 - INFO - sambaPoint.py:192 - Adding Samba mount point config to section [sftp_mount_someuser_img]:
2025-11-28 12:26:43,660 - INFO - sambaPoint.py:193 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 12:26:43,660 - INFO - sambaPoint.py:194 -  - force user: root
2025-11-28 12:26:43,661 - INFO - sambaPoint.py:195 -  - force group: vboxsf
2025-11-28 12:26:50,803 - INFO - sambaPoint.py:485 - Restarting Samba service
2025-11-28 12:26:50,831 - INFO - sambaPoint.py:492 -  - Stopping Samba - smbd service before restart.
2025-11-28 12:26:50,958 - INFO - sambaPoint.py:505 - < Samba service restarted successfully.
2025-11-28 12:26:52,525 - INFO - sambaPoint.py:628 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 12:27:33,307 - INFO - sambaPoint.py:272 - Added CIFS mount line to /etc/fstab for share 'img' (user=someuser).
2025-11-28 12:27:39,338 - INFO - sambaPoint.py:229 - Restarting systemd daemon.
2025-11-28 12:27:39,688 - INFO - sambaPoint.py:237 - Systemd daemon restarted successfully.
2025-11-28 12:27:53,988 - INFO - sambaPoint.py:636 -  - Ensuring Samba SFTP mount point img is mounted.
2025-11-28 12:28:11,511 - INFO - sambaPoint.py:644 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_root_img.
2025-11-28 12:28:17,581 - ERROR - sambaPoint.py:653 - Failed to mount Samba SFTP mount point //127.0.0.1/sftp_mount_root_img: Command '['mount', '//127.0.0.1/sftp_mount_root_img']' returned non-zero exit status 32.
2025-11-28 12:28:17,963 - ERROR - sambaPoint.py:654 - Command '['mount', '//127.0.0.1/sftp_mount_root_img']' returned non-zero exit status 32.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 647, in ensureMountpoint
    subprocess.run([
  File "/usr/lib/python3.12/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['mount', '//127.0.0.1/sftp_mount_root_img']' returned non-zero exit status 32.
2025-11-28 12:31:03,844 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:31:03,848 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:31:03,849 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:31:03,849 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:31:03,910 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:31:03,911 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:31:03,911 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:31:03,911 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:31:03,912 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:31:03,913 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:31:03,913 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:31:03,913 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:31:03,914 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:31:03,914 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:31:03,914 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:31:03,915 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:31:03,915 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:31:03,915 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:31:03,916 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:31:03,916 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:31:03,916 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:31:03,918 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:31:03,918 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:31:03,918 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:31:03,919 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:31:03,919 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:31:03,919 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:31:03,919 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:31:03,919 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:31:03,920 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:31:03,920 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:31:03,921 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:31:03,922 - INFO - sambaPoint.py:597 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 12:31:03,922 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 12:31:03,923 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 12:31:03,957 - INFO - sambaPoint.py:620 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 12:31:03,957 - INFO - sambaPoint.py:192 - Adding Samba mount point config to section [sftp_mount_someuser_img]:
2025-11-28 12:31:03,958 - INFO - sambaPoint.py:193 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 12:31:03,958 - INFO - sambaPoint.py:194 -  - force user: root
2025-11-28 12:31:03,958 - INFO - sambaPoint.py:195 -  - force group: vboxsf
2025-11-28 12:31:03,959 - INFO - sambaPoint.py:485 - Restarting Samba service
2025-11-28 12:31:03,982 - INFO - sambaPoint.py:492 -  - Stopping Samba - smbd service before restart.
2025-11-28 12:31:04,106 - INFO - sambaPoint.py:505 - < Samba service restarted successfully.
2025-11-28 12:31:04,107 - INFO - sambaPoint.py:628 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 12:31:04,107 - INFO - sambaPoint.py:310 - Removing CIFS fstab entry for img (someuser).
2025-11-28 12:31:04,108 - INFO - sambaPoint.py:272 - Added CIFS mount line to /etc/fstab for share 'img' (user=someuser).
2025-11-28 12:31:04,109 - INFO - sambaPoint.py:229 - Restarting systemd daemon.
2025-11-28 12:31:04,305 - INFO - sambaPoint.py:237 - Systemd daemon restarted successfully.
2025-11-28 12:31:04,305 - INFO - sambaPoint.py:636 -  - Ensuring Samba SFTP mount point img is mounted.
2025-11-28 12:31:11,216 - INFO - sambaPoint.py:644 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_img.
2025-11-28 12:32:44,223 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:32:44,228 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:32:44,229 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:32:44,229 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:32:44,293 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:32:44,293 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:32:44,294 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:32:44,294 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:32:44,294 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:32:44,295 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:32:44,295 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:32:44,296 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:32:44,296 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:32:44,296 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:32:44,297 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:32:44,297 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:32:44,297 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:32:44,298 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:32:44,298 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:32:44,298 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:32:44,299 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:32:44,300 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:32:44,300 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:32:44,300 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:32:44,301 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:32:44,301 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:32:44,301 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:32:44,302 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:32:44,302 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:32:44,302 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:32:44,302 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:32:44,303 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:32:44,304 - INFO - sambaPoint.py:597 - Ensuring Samba SFTP mount point configuration for share img.
2025-11-28 12:32:44,304 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 12:32:44,305 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 12:32:44,343 - INFO - sambaPoint.py:620 -  - Ensuring Samba SFTP mount point for share img at target /mnt/img/OrangePi/3b/rw.
2025-11-28 12:32:44,344 - INFO - sambaPoint.py:192 - Adding Samba mount point config to section [sftp_mount_someuser_img]:
2025-11-28 12:32:44,344 - INFO - sambaPoint.py:193 -  - target: /mnt/img/OrangePi/3b/rw
2025-11-28 12:32:44,344 - INFO - sambaPoint.py:194 -  - force user: root
2025-11-28 12:32:44,344 - INFO - sambaPoint.py:195 -  - force group: vboxsf
2025-11-28 12:32:44,345 - INFO - sambaPoint.py:485 - Restarting Samba service
2025-11-28 12:32:44,373 - INFO - sambaPoint.py:492 -  - Stopping Samba - smbd service before restart.
2025-11-28 12:32:44,489 - INFO - sambaPoint.py:505 - < Samba service restarted successfully.
2025-11-28 12:32:44,490 - INFO - sambaPoint.py:628 -  - Ensuring fstab CIFS config for Samba SFTP mount point img.
2025-11-28 12:32:44,490 - INFO - sambaPoint.py:310 - Removing CIFS fstab entry for img (someuser).
2025-11-28 12:32:44,491 - INFO - sambaPoint.py:272 - Added CIFS mount line to /etc/fstab for share 'img' (user=someuser).
2025-11-28 12:32:44,491 - INFO - sambaPoint.py:229 - Restarting systemd daemon.
2025-11-28 12:32:44,684 - INFO - sambaPoint.py:237 - Systemd daemon restarted successfully.
2025-11-28 12:32:44,684 - INFO - sambaPoint.py:636 -  - Ensuring Samba SFTP mount point img is mounted.
2025-11-28 12:33:05,664 - INFO - sambaPoint.py:644 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_img.
2025-11-28 12:33:11,124 - INFO - sambaPoint.py:668 - < Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_img mounted successfully.
2025-11-28 12:33:30,062 - INFO - parser.py:112 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-28 12:33:31,830 - INFO - parser.py:123 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-28 12:33:32,477 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:33:32,800 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:33:32,801 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:33:32,802 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:33:32,802 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:33:32,803 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:33:32,803 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:33:32,803 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:33:32,804 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:33:32,804 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:33:32,805 - INFO - sambaPoint.py:597 - Ensuring Samba SFTP mount point configuration for share opis.
2025-11-28 12:33:32,806 - INFO - sambaPoint.py:620 -  - Ensuring Samba SFTP mount point for share opis at target /home/dvestezar/pro_opis.
2025-11-28 12:33:32,806 - INFO - sambaPoint.py:192 - Adding Samba mount point config to section [sftp_mount_someuser_opis]:
2025-11-28 12:33:32,806 - INFO - sambaPoint.py:193 -  - target: /home/dvestezar/pro_opis
2025-11-28 12:33:32,807 - INFO - sambaPoint.py:194 -  - force user: dvestezar
2025-11-28 12:33:32,807 - INFO - sambaPoint.py:195 -  - force group: dvestezar
2025-11-28 12:33:32,808 - INFO - sambaPoint.py:485 - Restarting Samba service
2025-11-28 12:33:32,833 - INFO - sambaPoint.py:492 -  - Stopping Samba - smbd service before restart.
2025-11-28 12:33:32,963 - INFO - sambaPoint.py:505 - < Samba service restarted successfully.
2025-11-28 12:33:32,964 - INFO - sambaPoint.py:628 -  - Ensuring fstab CIFS config for Samba SFTP mount point opis.
2025-11-28 12:33:32,965 - INFO - sambaPoint.py:272 - Added CIFS mount line to /etc/fstab for share 'opis' (user=someuser).
2025-11-28 12:33:32,965 - INFO - sambaPoint.py:229 - Restarting systemd daemon.
2025-11-28 12:35:03,131 - INFO - sambaPoint.py:237 - Systemd daemon restarted successfully.
2025-11-28 12:35:03,131 - INFO - sambaPoint.py:636 -  - Ensuring Samba SFTP mount point opis is mounted.
2025-11-28 12:35:33,883 - INFO - sambaPoint.py:644 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis.
2025-11-28 12:36:53,138 - ERROR - sambaPoint.py:653 - Failed to mount Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
2025-11-28 12:36:57,266 - ERROR - sambaPoint.py:654 - Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 647, in ensureMountpoint
    subprocess.run([
  File "/usr/lib/python3.12/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
2025-11-28 12:36:59,637 - ERROR - sambaPoint.py:658 - Failed to ensure Samba SFTP mount point: Failed to mount Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
2025-11-28 12:37:14,812 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 12:37:14,817 - INFO - sftpmng.py:31 - Installing SFTP users from file: /root/vyvoj/python/diskBackup/res/testuser.jsonc
2025-11-28 12:37:14,818 - INFO - parser.py:54 - Loading SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:37:14,818 - INFO - parser.py:58 - Reading JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:37:14,883 - INFO - parser.py:67 - Parsing SFTP user data from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:37:14,883 - INFO - parser.py:71 -  - Found 'users' array in JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:37:14,884 - INFO - parser.py:78 - Creating 1 SFTP users from JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc.
2025-11-28 12:37:14,884 - INFO - parser.py:81 - Processing user data: someuser
2025-11-28 12:37:14,884 - INFO - parser.py:98 - User someuser already exists, skipping creation.
2025-11-28 12:37:14,886 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:37:14,886 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:37:14,887 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:37:14,887 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:37:14,887 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:37:14,888 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:37:14,888 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:37:14,888 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:37:14,889 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:37:14,891 - INFO - parser.py:108 - Adding mountpoints for user someuser.
2025-11-28 12:37:14,891 - INFO - parser.py:110 -  - Found 2 mountpoints to add for user someuser.
2025-11-28 12:37:14,892 - INFO - parser.py:112 -    - Processing mountpoint 'img': '/mnt/img/OrangePi/3b/rw'
2025-11-28 12:37:14,892 - INFO - parser.py:123 -    - Ensuring mountpoint 'img' for user someuser.
2025-11-28 12:37:14,892 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:37:14,893 - INFO - parser.py:112 -    - Processing mountpoint 'opis': '/home/dvestezar/pro_opis'
2025-11-28 12:37:14,893 - INFO - parser.py:123 -    - Ensuring mountpoint 'opis' for user someuser.
2025-11-28 12:37:14,893 - INFO - parser.py:125 -      - Creating Samba mountpoint for user someuser.
2025-11-28 12:37:14,893 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:37:14,894 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:37:14,894 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:37:14,894 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:37:14,895 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:37:14,895 - ERROR - ssh.py:37 -  < .ssh directory does not exist for user someuser and create is False.
2025-11-28 12:37:14,895 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:37:14,895 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:37:14,895 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:37:14,896 - INFO - sambaPoint.py:597 - Ensuring Samba SFTP mount point configuration for share opis.
2025-11-28 12:37:14,897 - INFO - sambaPoint.py:81 - Samba SFTP user sftp_samba_user already exists.
2025-11-28 12:37:14,897 - INFO - sambaPoint.py:63 - Setting password for Samba SFTP user sftp_samba_user.
2025-11-28 12:37:14,932 - INFO - sambaPoint.py:620 -  - Ensuring Samba SFTP mount point for share opis at target /home/dvestezar/pro_opis.
2025-11-28 12:37:14,933 - INFO - sambaPoint.py:192 - Adding Samba mount point config to section [sftp_mount_someuser_opis]:
2025-11-28 12:37:14,933 - INFO - sambaPoint.py:193 -  - target: /home/dvestezar/pro_opis
2025-11-28 12:37:14,933 - INFO - sambaPoint.py:194 -  - force user: dvestezar
2025-11-28 12:37:14,933 - INFO - sambaPoint.py:195 -  - force group: dvestezar
2025-11-28 12:37:14,934 - INFO - sambaPoint.py:485 - Restarting Samba service
2025-11-28 12:37:14,959 - INFO - sambaPoint.py:492 -  - Stopping Samba - smbd service before restart.
2025-11-28 12:37:15,081 - INFO - sambaPoint.py:505 - < Samba service restarted successfully.
2025-11-28 12:37:15,081 - INFO - sambaPoint.py:628 -  - Ensuring fstab CIFS config for Samba SFTP mount point opis.
2025-11-28 12:37:15,082 - INFO - sambaPoint.py:310 - Removing CIFS fstab entry for opis (someuser).
2025-11-28 12:37:15,083 - INFO - sambaPoint.py:272 - Added CIFS mount line to /etc/fstab for share 'opis' (user=someuser).
2025-11-28 12:37:15,083 - INFO - sambaPoint.py:229 - Restarting systemd daemon.
2025-11-28 12:38:45,255 - INFO - sambaPoint.py:237 - Systemd daemon restarted successfully.
2025-11-28 12:38:45,255 - INFO - sambaPoint.py:636 -  - Ensuring Samba SFTP mount point opis is mounted.
2025-11-28 12:38:45,256 - INFO - sambaPoint.py:644 -  - Mounting Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis.
2025-11-28 12:38:45,378 - ERROR - sambaPoint.py:653 - Failed to mount Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
2025-11-28 12:38:45,378 - ERROR - sambaPoint.py:654 - Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 647, in ensureMountpoint
    import subprocess
  File "/usr/lib/python3.12/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
2025-11-28 12:38:45,381 - ERROR - sambaPoint.py:658 - Failed to ensure Samba SFTP mount point: Failed to mount Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
2025-11-28 12:38:45,381 - ERROR - sambaPoint.py:659 - Failed to mount Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 647, in ensureMountpoint
    import subprocess
  File "/usr/lib/python3.12/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/vyvoj/python/diskBackup/libs/JBLibs/sftp/sambaPoint.py", line 655, in ensureMountpoint
    log.exception(e)
RuntimeError: Failed to mount Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis: Command '['mount', '//127.0.0.1/sftp_mount_someuser_opis']' returned non-zero exit status 32.
2025-11-28 12:38:45,382 - INFO - sambaPoint.py:660 -  - Cleaning up Samba SFTP
2025-11-28 12:38:45,382 - INFO - sambaPoint.py:662 - < Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis mounted successfully.
2025-11-28 12:38:45,382 - INFO - parser.py:134 - Adding certificates for user someuser.
2025-11-28 12:38:45,383 - INFO - parser.py:136 -  - Found 1 certificates to add for user someuser.
2025-11-28 12:38:45,383 - INFO - parser.py:138 -    - Processing certificate for user someuser.
2025-11-28 12:38:45,383 - INFO - parser.py:144 -    - Decoding base64 certificate for user someuser.
2025-11-28 12:38:45,384 - INFO - parser.py:149 -    - Successfully decoded base64 certificate for user someuser.
2025-11-28 12:38:45,384 - INFO - parser.py:154 -    - Ensuring SSH key for user someuser.
2025-11-28 12:38:45,385 - INFO - parser.py:158 -    - Adding certificate for user someuser.
2025-11-28 12:38:45,386 - INFO - ssh.py:180 - Ensuring SSH key for user someuser
2025-11-28 12:38:45,386 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:38:45,386 - INFO - ssh.py:58 -  < Successfully ensured .ssh directory for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 12:38:45,387 - INFO - ssh.py:200 -  - No existing authorized_keys file for user someuser. It will be created.
2025-11-28 12:38:45,387 - INFO - ssh.py:207 -  - Writing authorized_keys file for user someuser.
2025-11-28 12:38:45,387 - INFO - ssh.py:212 -  - Setting ownership and permissions for authorized_keys file of user someuser.
2025-11-28 12:38:45,388 - INFO - ssh.py:216 -  < Successfully wrote authorized_keys file for user someuser at /home_sftp_users/someuser/.ssh/authorized_keys.
2025-11-28 12:38:45,388 - INFO - parser.py:164 -    - Ensuring SSH config for user {username}.
2025-11-28 12:38:45,389 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 12:38:45,389 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 12:38:45,389 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 12:38:45,389 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 12:38:45,390 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 12:38:45,390 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 12:38:45,390 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 12:38:45,391 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 12:38:45,391 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 12:38:45,391 - INFO - parser.py:171 -    - Ensuring mountpoint user groups for user someuser.
2025-11-28 12:38:45,471 - INFO - parser.py:180 -  <<< Successfully created/updated user someuser from JSON data.
2025-11-28 12:38:45,472 - INFO - parser.py:186 - Finished processing JSON file /root/vyvoj/python/diskBackup/res/testuser.jsonc. Created/updated 1 users.
2025-11-28 12:38:45,472 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 12:38:45,504 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 12:38:45,564 - INFO - sftpmng.py:75 - 
******************** SFTP Jail Manager Finished ********************

2025-11-28 14:27:19,080 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 14:27:19,085 - INFO - sftpmng.py:40 - Uninstalling all SFTP users.
2025-11-28 14:27:19,086 - INFO - parser.py:299 - Uninstalling all SFTP users.
2025-11-28 14:27:19,088 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 14:27:19,088 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 14:27:19,089 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 14:27:19,089 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 14:27:19,089 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 14:27:19,089 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 14:27:19,090 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 14:27:19,090 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 14:27:19,090 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 14:27:19,093 - INFO - parser.py:277 - Uninstalling SFTP user <libs.JBLibs.sftp.user.sftpUserMng object at 0x709e5ff98c50>.
2025-11-28 14:27:19,093 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-28 14:27:26,051 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-28 14:27:31,877 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-28 14:28:08,078 - INFO - sambaPoint.py:553 - Removing Samba SFTP mount point for share img.
2025-11-28 14:28:51,166 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 14:28:51,170 - INFO - sftpmng.py:40 - Uninstalling all SFTP users.
2025-11-28 14:28:51,170 - INFO - parser.py:299 - Uninstalling all SFTP users.
2025-11-28 14:28:51,180 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 14:28:51,181 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 14:28:51,181 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 14:28:51,181 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 14:28:51,182 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 14:28:51,182 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 14:28:51,182 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 14:28:51,183 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 14:28:51,183 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 14:28:51,185 - INFO - parser.py:277 - Uninstalling SFTP user <libs.JBLibs.sftp.user.sftpUserMng object at 0x7db7366aacc0>.
2025-11-28 14:28:51,186 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-28 14:28:57,648 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-28 14:29:01,181 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-28 14:29:10,317 - INFO - sambaPoint.py:553 - Removing Samba SFTP mount point for share img.
2025-11-28 14:29:32,178 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 14:29:32,183 - INFO - sftpmng.py:40 - Uninstalling all SFTP users.
2025-11-28 14:29:32,183 - INFO - parser.py:299 - Uninstalling all SFTP users.
2025-11-28 14:29:32,186 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 14:29:32,186 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 14:29:32,187 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 14:29:32,187 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 14:29:32,187 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 14:29:32,187 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 14:29:32,188 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 14:29:32,188 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 14:29:32,188 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 14:29:32,191 - INFO - parser.py:277 - Uninstalling SFTP user <libs.JBLibs.sftp.user.sftpUserMng object at 0x77839a692180>.
2025-11-28 14:29:32,191 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-28 14:29:37,791 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-28 14:29:38,421 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-28 14:29:41,118 - INFO - sambaPoint.py:553 - Removing Samba SFTP mount point for share img.
2025-11-28 14:31:03,064 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 14:31:03,069 - INFO - sftpmng.py:40 - Uninstalling all SFTP users.
2025-11-28 14:31:03,069 - INFO - parser.py:299 - Uninstalling all SFTP users.
2025-11-28 14:31:03,071 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 14:31:03,072 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 14:31:03,072 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 14:31:03,072 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 14:31:03,073 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 14:31:03,073 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 14:31:03,073 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 14:31:03,074 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 14:31:03,074 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 14:31:03,076 - INFO - parser.py:277 - Uninstalling SFTP user <libs.JBLibs.sftp.user.sftpUserMng object at 0x7e75d1c8eb10>.
2025-11-28 14:31:03,076 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-28 14:31:05,132 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-28 14:31:05,731 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-28 14:31:05,733 - INFO - sambaPoint.py:553 - Removing Samba SFTP mount point for share img.
2025-11-28 14:31:11,087 - INFO - sambaPoint.py:557 - Unmounting Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_img before removal.
2025-11-28 14:31:25,372 - INFO - sambaPoint.py:571 -  - Removing fstab CIFS config for Samba SFTP mount point img.
2025-11-28 14:31:59,879 - INFO - sftpmng.py:11 - 
******************** SFTP Jail Manager Started ********************
2025-11-28 14:31:59,883 - INFO - sftpmng.py:40 - Uninstalling all SFTP users.
2025-11-28 14:31:59,883 - INFO - parser.py:299 - Uninstalling all SFTP users.
2025-11-28 14:31:59,885 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 14:31:59,886 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 14:31:59,887 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 14:31:59,887 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 14:31:59,888 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 14:31:59,889 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 14:31:59,889 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 14:31:59,892 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 14:31:59,893 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 14:31:59,895 - INFO - parser.py:277 - Uninstalling SFTP user <libs.JBLibs.sftp.user.sftpUserMng object at 0x71e429bee9f0>.
2025-11-28 14:31:59,896 - INFO - user.py:229 - Killing all processes for user someuser before deletion.
2025-11-28 14:32:01,957 - INFO - user.py:233 - Checking if mountpoints can be safely unmounted for user someuser.
2025-11-28 14:32:02,248 - INFO - user.py:239 - Deleting all mountpoints for user someuser.
2025-11-28 14:32:02,250 - INFO - sambaPoint.py:553 - Removing Samba SFTP mount point for share img.
2025-11-28 14:32:32,790 - INFO - sambaPoint.py:571 -  - Removing fstab CIFS config for Samba SFTP mount point img.
2025-11-28 14:33:14,165 - INFO - sambaPoint.py:321 - Removing CIFS fstab entry for img (someuser).
2025-11-28 14:33:46,628 - INFO - sambaPoint.py:578 -  - Removing Samba SFTP mount point configuration for share img.
2025-11-28 14:33:47,929 - INFO - sambaPoint.py:230 - Removing Samba mount point config for section [sftp_mount_someuser_img].
2025-11-28 14:34:07,732 - INFO - sambaPoint.py:583 -  - Removing Samba SFTP mount point directory /home_sftp_users/someuser/__sftp__/img.
2025-11-28 14:34:23,752 - INFO - sambaPoint.py:239 - Restarting systemd daemon.
2025-11-28 14:34:23,960 - INFO - sambaPoint.py:247 - Systemd daemon restarted successfully.
2025-11-28 14:34:27,442 - INFO - sambaPoint.py:593 - < Samba SFTP mount point for share img removed successfully.
2025-11-28 14:34:34,306 - INFO - sambaPoint.py:553 - Removing Samba SFTP mount point for share opis.
2025-11-28 14:34:34,307 - INFO - sambaPoint.py:557 - Unmounting Samba SFTP mount point //127.0.0.1/sftp_mount_someuser_opis before removal.
2025-11-28 14:34:43,963 - INFO - sambaPoint.py:571 -  - Removing fstab CIFS config for Samba SFTP mount point opis.
2025-11-28 14:34:44,756 - INFO - sambaPoint.py:321 - Removing CIFS fstab entry for opis (someuser).
2025-11-28 14:34:55,793 - INFO - sambaPoint.py:578 -  - Removing Samba SFTP mount point configuration for share opis.
2025-11-28 14:34:56,453 - INFO - sambaPoint.py:230 - Removing Samba mount point config for section [sftp_mount_someuser_opis].
2025-11-28 14:35:21,433 - INFO - sambaPoint.py:583 -  - Removing Samba SFTP mount point directory /home_sftp_users/someuser/__sftp__/opis.
2025-11-28 14:35:23,632 - INFO - sambaPoint.py:239 - Restarting systemd daemon.
2025-11-28 14:35:23,830 - INFO - sambaPoint.py:247 - Systemd daemon restarted successfully.
2025-11-28 14:35:25,001 - INFO - sambaPoint.py:593 - < Samba SFTP mount point for share opis removed successfully.
2025-11-28 14:35:33,088 - INFO - ssh.py:233 - Ensuring jail directory for user someuser
2025-11-28 14:35:33,089 - INFO - ssh.py:248 -  - Jail directory /home_sftp_users/someuser/__sftp__ already exists for user someuser.
2025-11-28 14:35:33,089 - INFO - ssh.py:75 - Writing sshd config for user someuser with jail /home_sftp_users/someuser/__sftp__
2025-11-28 14:35:33,090 - INFO - ssh.py:92 -  - SSHD config directory /etc/ssh/sshd_config.d already exists.
2025-11-28 14:35:33,090 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 14:35:33,090 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 14:35:33,091 - INFO - ssh.py:98 -  - Writing sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf.
2025-11-28 14:35:33,092 - INFO - ssh.py:101 -  < Successfully wrote sshd config for user someuser to /etc/ssh/sshd_config.d/sftp-someuser.conf
2025-11-28 14:35:33,092 - INFO - ssh.py:272 -  < Successfully ensured jail directory for user someuser at /home_sftp_users/someuser/__sftp__.
2025-11-28 14:35:33,771 - INFO - user.py:253 - Deleting all certificates for user someuser.
2025-11-28 14:35:35,331 - INFO - ssh.py:140 - Deleting SSH key for user someuser
2025-11-28 14:35:35,332 - INFO - ssh.py:29 - Ensuring .ssh directory exists for user someuser
2025-11-28 14:35:35,333 - INFO - ssh.py:41 -  < .ssh directory already exists for user someuser at /home_sftp_users/someuser/.ssh.
2025-11-28 14:35:35,334 - INFO - ssh.py:165 -  < Successfully removed SSH key for user someuser.
2025-11-28 14:35:36,019 - INFO - user.py:260 - Removing sshd configuration for user someuser.
2025-11-28 14:35:36,380 - INFO - ssh.py:116 - Removing sshd config for user someuser
2025-11-28 14:35:36,381 - INFO - ssh.py:119 -  - Found sshd config for user someuser at /etc/ssh/sshd_config.d/sftp-someuser.conf. Deleting it.
2025-11-28 14:35:36,382 - INFO - ssh.py:122 -  < Successfully removed sshd config for user someuser and restarted sshd.
2025-11-28 14:35:37,641 - INFO - user.py:264 - Removing user someuser from all SFTP groups.
2025-11-28 14:35:43,287 - INFO - user.py:268 - Deleting user someuser from system.
2025-11-28 14:35:43,701 - INFO - user.py:271 - Setting ownership and permissions for home directory /home_sftp_users/someuser of user someuser before deletion.
2025-11-28 14:36:05,298 - INFO - user.py:282 - Deleting user someuser and its home directory /home_sftp_users/someuser.
2025-11-28 14:36:10,996 - INFO - user.py:293 - Ensuring home directory /home_sftp_users/someuser of user someuser is removed.
2025-11-28 14:36:18,899 - INFO - parser.py:287 - Successfully uninstalled SFTP user <libs.JBLibs.sftp.user.sftpUserMng object at 0x71e429bee9f0>.
2025-11-28 14:36:24,544 - INFO - ssh.py:280 - Restarting sshd service
2025-11-28 14:36:24,574 - INFO - ssh.py:290 -  - Stopping sshd service before restart.
2025-11-28 14:36:25,876 - INFO - sftpmng.py:62 - 
******************** SFTP Jail Manager Finished ********************

